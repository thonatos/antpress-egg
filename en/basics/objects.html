<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.png"><style class="_styletron_hydrate_"></style><title>Framework Built-in Objects</title><meta name="description" content="Born to build better enterprise frameworks and apps"><link href="/static/css/post.d62265dc.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="ant-layout" data-reactroot=""><div class="header-module__header___3ADJ9 ant-layout-header"><div class="ant-row-flex"><div class="ant-col-xs-12 ant-col-md-20 ant-col-lg-2"><div class="header-module__logo___3yTXp"><a href="/"><img src="/logo.svg" alt="logo"/></a></div></div><div class="ant-col-xs-0 ant-col-md-0 ant-col-lg-20"><ul class="ant-menu header-module__menu___3yEtW ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-item" role="menuitem"><a href="/en/intro/">Guide</a></li><li class="ant-menu-item" role="menuitem"><a href="/api/">API</a></li><li class="ant-menu-item" role="menuitem"><a href="/en/tutorials/index.html">Tutorials</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/search?q=topic%3Aegg-plugin&amp;type=Repositories">Plugins</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/eggjs/egg/releases">Release</a></li></ul></div><div style="text-align:right" class="ant-col-xs-12 ant-col-md-4 ant-col-lg-2"><button type="button" class="ant-btn"><span>切换语言</span></button></div></div></div><div class="ant-layout-content"><div class="basic_layout-module__content___3flpY ant-layout"><div class="sider-module__side___1Cadj ant-layout-sider ant-layout-sider-light" style="flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"><ul class="ant-menu sider-module__menu___2GqPr ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true"><span>Guide</span><i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/index.html">What is Egg?</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/egg-and-koa.html">Egg and Koa</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/quickstart.html">Quick Start</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/progressive.html">Progressive</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/migration.html">Migration to 2.x</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true"><span>Basis Function</span><i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/structure.html">Directory Structure</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/objects.html">Built-in Objects</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/env.html">Environment</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/config.html">Configuration</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/middleware.html">Middleware</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/router.html">Router</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/controller.html">Controller</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/service.html">Service</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/plugin.html">Plugin</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/schedule.html">Schedule</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/extend.html">Extend</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/app-start.html">Custom Init</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true"><span>Core</span><i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/development.html">Development</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/unittest.html">Unit Testing</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/deployment.html">Deployment</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/logger.html">Logger</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/httpclient.html">HttpClient</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/cookie-and-session.html">Cookie and Session</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/cluster-and-ipc.html">Cluster and IPC</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/view.html">View</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/error-handling.html">Error Handling</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/security.html">Security</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/i18n.html">i18n</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="3$Menu" aria-haspopup="true"><span>Tutorials</span><i class="ant-menu-submenu-arrow"></i></div><ul id="3$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/mysql.html">MySQL</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/restful.html">RESTful API</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/passport.html">Passport</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/socketio.html">Socket.IO</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/assets.html">Assets</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/typescript.html">TypeScript</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true"><span>Advanced</span><i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/loader.html">Loader</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/plugin.html">Plugin Development</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/framework.html">Framework</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/cluster-client.html">Cluster Enhancement</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/view-plugin.html">View Plugin</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/style-guide.html">Style Guide</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true"><span>Community</span><i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/plugins/">Plugin List</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/contributing.html">Contributing</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/resource.html">Resource</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/faq.html">FAQ</a></li></ul></li></ul></div></div><div class="basic_layout-module__post___2Z7KK ant-layout-content"><div class="ant-row" style="margin-left:-8px;margin-right:-8px"><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-24 ant-col-md-18"><div class="markdown-body" style="font-size:14px"><div><p>At this chapter, we will introduce some built-in basic objects in the framework, including four objects (Application, Context, Request, Response) inherited from <a href="http://koajs.com">Koa</a> and some objects that extended by the framework (Controller, Service , Helper, Config, Logger), we will often see them in the follow-up documents.</p><h2 id="application">Application</h2><p>Application is a global application object, an application only instantiates one Application, it is inherited from <a href="http://koajs.com/#application">Koa.Application</a>, we can mount some global methods and objects on it. We can easily <a href="./extend.md#Application">extend Application object</a> in plugin or application.</p><h3 id="events">Events</h3><p>Framework will emits some events when server running, application developers or plugin developers can listen on these events to do some job like logging. As application developers, we can listen on these events in <a href="./app-start.md">app start script</a>.</p><ul><li><code>server</code>: every worker will only emit once during the runtime, after HTTP server started, framework will expose HTTP server instance by this event.</li><li><code>error</code>: if any exception catched by onerror plugin, it will emit an <code>error</code> event with the exception instance and current context instance(if have), developers can listen on this event to report or logging.</li><li><code>request</code> and <code>response</code>: application will emit <code>request</code> and <code>response</code> event when receive requests and ended responses, developers can listen on these events to generate some digest log.</li></ul><pre><code class="language-js">// app.js

module.exports = app =&gt; {
  app.once(&#x27;server&#x27;, server =&gt; {
    // websocket
  });
  app.on(&#x27;error&#x27;, (err, ctx) =&gt; {
    // report error
  });
  app.on(&#x27;request&#x27;, ctx =&gt; {
    // log receive request
  });
  app.on(&#x27;response&#x27;, ctx =&gt; {
    // ctx.starttime is set by framework
    const used = Date.now() - ctx.starttime;
    // log total cost
  });
};</code></pre><h3 id="how-to-get">How to Get</h3><p>Application object can be accessed almost anywhere in application, here are a few commonly used access ways:</p><p>Almost all files (Controller, Service, Schedule, etc.) loaded by the <a href="../advanced/loader.md">Loader</a> can export a function that is called by the Loader and uses the app as a parameter:</p><ul><li><p><a href="./app-start.md">App start script</a></p><pre><code class="language-js">// app.js
module.exports = app =&gt; {
  app.cache = new Cache();
};</code></pre></li><li><p><a href="./controller.md">Controller file</a></p><pre><code class="language-js">// app/controller/user.js
class UserController extends Controller {
  async fetch() {
    this.ctx.body = app.cache.get(this.ctx.query.id);
  }
}</code></pre></li></ul><p>Like the <a href="http://koajs.com">Koa</a>, on the Context object, we can access the Application object via <code>ctx.app</code>. Use the above Controller file as an example:</p><pre><code class="language-js">// app/controller/user.js
class UserController extends Controller {
  async fetch() {
    this.ctx.body = this.ctx.app.cache.get(this.ctx.query.id);
  }
}</code></pre><p>In the instance objects that inherited from the Controller and Service base classes, the Application object can be accessed via <code>this.app</code>.</p><pre><code class="language-js">// app/controller/user.js
class UserController extends Controller {
  async fetch() {
    this.ctx.body = this.app.cache.get(this.ctx.query.id);
  }
};</code></pre><h2 id="context">Context</h2><p>Context is a <strong>request level object</strong>, inherited from <a href="http://koajs.com/#context">Koa.Context</a>. When a request is received every time, the framework instantiates a Context object that encapsulates the information requested by the user and provides a number of convenient ways to get the request parameter or set the response information. The framework will mount all of the <a href="./service.md">Service</a> on the Context instance, and some plugins will mount some other methods and objects on it (<a href="https://github.com/eggjs/egg-sequelize">egg-sequelize</a> will mount all the models on the Context).</p><h3 id="how-to-get">How to Get</h3><p>The most common way to get the Context instance is in <a href="./middleware.md">Middleware</a>, <a href="./controller.md">Controller</a>, and <a href="./service.md">Service</a>. The access method in the Controller is shown in the above example. In the Service, the access way is same as Controller. The access Context method in the Middleware of Egg is same as <a href="http://koajs.com">Koa</a> framework gets the Context object in its middleware.</p><p>The <a href="./middleware.md">Middleware</a> of Egg also supports Koa v1 and Koa v2 two different middleware coding formats. use different format, the way to access Context instance is also slightly different:</p><pre><code class="language-js">// Koa v1
function* middleware(next) {
  // this is instance of Context
  console.log(this.query);
  yield next;
}

// Koa v2
async function middleware(ctx, next) {
  // ctx is instance of Context
  console.log(ctx.query);
}</code></pre><p>In addition to the request can get the Context instance, in some non-request scenario we need to access service / model and other objects on the Context instance, we can use<code>Application.createAnonymousContext ()</code> method to create an anonymous Context instance:</p><pre><code class="language-js">// app.js
module.exports = app =&gt; {
  app.beforeStart(async () =&gt; {
    const ctx = app.createAnonymousContext();
    // preload before app start
    await ctx.service.posts.load();
  });
}</code></pre><p>Each task in <a href="./schedule.md">Schedule</a> takes a Context instance as a parameter so that we can more easily execute some schedule business logic:</p><pre><code class="language-js">// app/schedule/refresh.js
exports.task = async ctx =&gt; {
  await ctx.service.posts.refresh();
};</code></pre><h2 id="request-response">Request &amp; Response</h2><p>Request is a <strong>request level object</strong>, inherited from <a href="http://koajs.com/#request">Koa.Request</a>. Encapsulates the Node.js native HTTP Request object, and provides a set of helper methods to get commonly used parameters of HTTP requests.</p><p>Response is a <strong>request level object</strong>, inherited from <a href="http://koajs.com/#response">Koa.Response</a>. Encapsulates the Node.js native HTTP Response object, and provides a set of helper methods to set the HTTP response.</p><h3 id="how-to-get">How to Get</h3><p>We can get the Request(<code>ctx.request</code>) and Response (<code>ctx.response</code>) instances of the current request on the Context instance.</p><pre><code class="language-js">// app/controller/user.js
class UserController extends Controller {
  async fetch() {
    const { app, ctx } = this;
    const id = ctx.request.query.id;
    ctx.response.body = app.cache.get(id);
  }
}</code></pre><ul><li><a href="http://koajs.com">Koa</a> will proxy some methods and properties of Request and Response on Context, see <a href="http://koajs.com/#context">Koa.Context</a>.</li><li><code>ctx.request.query.id</code> and<code>ctx.query.id</code> are equivalent in the above example , <code>ctx.response.body =</code> and <code>ctx.body =</code> are equivalent.</li><li>It should be noted that get the body of POST should use <code>ctx.request.body</code> instead of<code>ctx.body</code>.</li></ul><h2 id="controller">Controller</h2><p>Egg provides a Controller base class and recommends that all <a href="./controller.md">Controller</a> inherit from the base class. The Controller base class has the following properties:</p><ul><li><code>ctx</code> - <a href="#context">Context</a> instance of the current request.</li><li><code>app</code> - <a href="#application">Application</a> instance.</li><li><code>config</code> - application <a href="./config.md">configuration</a>.</li><li><code>service</code> - all <a href="./service.md">service</a>(./ service.md) of application.</li><li><code>logger</code> - the encapsulated logger object for the current controller.</li></ul><p>In the Controller file, there are two ways to use the Controller base class:</p><pre><code class="language-js">// app/controller/user.js

// get from egg (recommend)
const Controller = require(&#x27;egg&#x27;).Controller;
class UserController extends Controller {
  // implement
}
module.exports = UserController;

// get from app instance
module.exports = app =&gt; {
  return class UserController extends app.Controller {
    // implement
  };
};</code></pre><h2 id="service">Service</h2><p>Egg provides a Service base class and recommends that all <a href="./service.md">Service</a> inherit from the base class.</p><p>The properties of the Service base class are the same as those of the <a href="#controller">Controller</a> base class, the access method is similar:</p><pre><code class="language-js">// app/service/user.js

// get from egg (recommend)
const Service = require(&#x27;egg&#x27;).Service;
class UserService extends Service {
  // implement
}
module.exports = UserService;

// get from app instance
module.exports = app =&gt; {
  return class UserService extends app.Service {
    // implement
  };
};</code></pre><h2 id="helper">Helper</h2><p>Helper is used to provide some useful utility functions. Its role is that we can put some commonly used functions into helper.js, so we can use JavaScript to write complex logic, avoid the logic being scattered everywhere, and can be more convenient to write test cases.</p><p>The Helper itself is a class that has the same properties as the <a href="#controller">Controller</a> base class, and it will be instantiated at each request so that all functions on the Helper can also get context of the current request.</p><h3 id="how-to-get">How to Get</h3><p>We can get the Helper(<code>ctx.helper</code>) instance of the current request on the Context instance.</p><pre><code class="language-js">// app/controller/user.js
class UserController extends Controller {
  async fetch() {
    const { app, ctx } = this;
    const id = ctx.query.id;
    const user = app.cache.get(id);
    ctx.body = ctx.helper.formatUser(user);
  }
}</code></pre><p>In addition, Helper instances can also be accessed in template, for example, we can get <code>shtml</code> method provided by <a href="../core/security.md">security</a> plugin  in template.</p><pre><code>// app/view/home.nj
{{ helper.shtml(value) }}</code></pre><h3 id="custom-helper-method">Custom helper method</h3><p>In application development, we may often customize some helper methods, such as <code>formatUser</code> in the above example, we can customize helper method with a way of <a href="./extend.md#helper">framework extension</a>.</p><pre><code class="language-js">// app/extend/helper.js
module.exports = {
  formatUser(user) {
    return only(user, [ &#x27;name&#x27;, &#x27;phone&#x27; ]);
  }
};</code></pre><h2 id="config">Config</h2><p>We recommend application development to follow the principle of configuration and code separation, put hard-coded business in configuration file, and the configuration file supports different runtime environments using different configurations, it is very convenient to use it. the framework, plugin and application-level configurations are available via the Config object. For configuration of Egg, read <a href="./config.md">Configuration</a> in detail.</p><h3 id="how-to-get">How to Get</h3><p>We can get the config object from the Application instance via <code>app.config</code>, or get the config object via<code>this.config</code> on the instance of Controller, Service or Helper.</p><h2 id="logger">Logger</h2><p>Egg builds in powerful <a href="../core/logger.md">logger</a>, it is very convenient to print a variety of levels of logs to the corresponding log file, each logger object provides 5 level methods:</p><ul><li><code>logger.debug()</code></li><li><code>logger.info()</code></li><li><code>logger.warn()</code></li><li><code>logger.error()</code></li></ul><p>Egg provides a number of Logger object, we simply introduce how to get each Logger and its use scenario.</p><h3 id="app-logger">App Logger</h3><p>We can get it via <code>app.logger</code>. If we want to do some application-level logging, such as logging some data in the startup phase, logging some business informations that are unrelated to request, those can be done by App Logger.</p><h3 id="app-corelogger">App CoreLogger</h3><p>We can get it via <code>app.coreLogger</code>, and we should not print logs via CoreLogger when developing applications. the framework and plugins need to print application-level logs to make it easier to distinguish from logs printed by applications and logs printed by frameworks, the logs printed by the CoreLogger will be placed in a different file than the Logger.</p><h3 id="context-logger">Context Logger</h3><p>We can get it via <code>ctx.logger</code> from Context instance, we can see from access method, Context Logger must be related to the request, it will take current request related information (such as <code>[$userId/$ip/$traceId/${cost}ms $method $url]</code>) in the front of logs, with this information, we can quickly locate requests from logs and concatenate all logs in one request.</p><h3 id="context-corelogger">Context CoreLogger</h3><p>We can get it via <code>ctx.coreLogger</code>, the difference between the Context Logger is that only plugins and framework will log via it.</p><h3 id="controller-logger-service-logger">Controller Logger &amp; Service Logger</h3><p>We can get them via <code>this.logger</code> in Controller and Service instance, they are essentially a Context Logger, but additional file path will be added to logs, easy to locate the log print location.</p><h2 id="subscription">Subscription</h2><p>Subscription is a common model for subscribing, for example, the consumer in message broker or schedule, so we provide the Subscription base class to normalize this model.</p><p>The base class of Subscription can be exported in the following way.</p><pre><code class="language-js">const Subscription = require(&#x27;egg&#x27;).Subscription;

class Schedule extends Subscription {
  // This method should be implemented
  // subscribe can be async function or generator function
  async subscribe() {}
}</code></pre><p>We recommend plugin developers to implement based on this model, For example, <a href="./schedule.md">Schedule</a>.</p></div></div></div><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-0 ant-col-md-6"><div class="markdown-body" style="font-size:14px"><div><ul><li><a href="#application">Application</a><ul><li><a href="#events">Events</a></li><li><a href="#how-to-get">How to Get</a></li></ul></li><li><a href="#context">Context</a><ul><li><a href="#how-to-get">How to Get</a></li></ul></li><li><a href="#request-response">Request &amp; Response</a><ul><li><a href="#how-to-get">How to Get</a></li></ul></li><li><a href="#controller">Controller</a></li><li><a href="#service">Service</a></li><li><a href="#helper">Helper</a><ul><li><a href="#how-to-get">How to Get</a></li><li><a href="#custom-helper-method">Custom helper method</a></li></ul></li><li><a href="#config">Config</a><ul><li><a href="#how-to-get">How to Get</a></li></ul></li><li><a href="#logger">Logger</a><ul><li><a href="#app-logger">App Logger</a></li><li><a href="#app-corelogger">App CoreLogger</a></li><li><a href="#context-logger">Context Logger</a></li><li><a href="#context-corelogger">Context CoreLogger</a></li><li><a href="#controller-logger-service-logger">Controller Logger &amp; Service Logger</a></li></ul></li><li><a href="#subscription">Subscription</a></li></ul></div></div></div></div></div></div></div></div></div><script type="text/javascript">window.__INIT_STATE__={"lang":"en","props":{"toc":"-%20%5BApplication%5D(%23application)%0A%20%20*%20%5BEvents%5D(%23events)%0A%20%20*%20%5BHow%20to%20Get%5D(%23how-to-get)%0A-%20%5BContext%5D(%23context)%0A%20%20*%20%5BHow%20to%20Get%5D(%23how-to-get)%0A-%20%5BRequest%20%26%20Response%5D(%23request-response)%0A%20%20*%20%5BHow%20to%20Get%5D(%23how-to-get)%0A-%20%5BController%5D(%23controller)%0A-%20%5BService%5D(%23service)%0A-%20%5BHelper%5D(%23helper)%0A%20%20*%20%5BHow%20to%20Get%5D(%23how-to-get)%0A%20%20*%20%5BCustom%20helper%20method%5D(%23custom-helper-method)%0A-%20%5BConfig%5D(%23config)%0A%20%20*%20%5BHow%20to%20Get%5D(%23how-to-get)%0A-%20%5BLogger%5D(%23logger)%0A%20%20*%20%5BApp%20Logger%5D(%23app-logger)%0A%20%20*%20%5BApp%20CoreLogger%5D(%23app-corelogger)%0A%20%20*%20%5BContext%20Logger%5D(%23context-logger)%0A%20%20*%20%5BContext%20CoreLogger%5D(%23context-corelogger)%0A%20%20*%20%5BController%20Logger%20%26%20Service%20Logger%5D(%23controller-logger-service-logger)%0A-%20%5BSubscription%5D(%23subscription)","meta":{"info":{"title":"Framework Built-in Objects"}},"content":"%0A%0A%0AAt%20this%20chapter%2C%20we%20will%20introduce%20some%20built-in%20basic%20objects%20in%20the%20framework%2C%20including%20four%20objects%20(Application%2C%20Context%2C%20Request%2C%20Response)%20inherited%20from%20%5BKoa%5D%20and%20some%20objects%20that%20extended%20by%20the%20framework%20(Controller%2C%20Service%20%2C%20Helper%2C%20Config%2C%20Logger)%2C%20we%20will%20often%20see%20them%20in%20the%20follow-up%20documents.%0A%0A%23%23%20Application%0A%0AApplication%20is%20a%20global%20application%20object%2C%20an%20application%20only%20instantiates%20one%20Application%2C%20it%20is%20inherited%20from%20%5BKoa.Application%5D%2C%20we%20can%20mount%20some%20global%20methods%20and%20objects%20on%20it.%20We%20can%20easily%20%5Bextend%20Application%20object%5D%20(.%2Fextend.md%23Application)%20in%20plugin%20or%20application.%0A%0A%23%23%23%20Events%0A%0AFramework%20will%20emits%20some%20events%20when%20server%20running%2C%20application%20developers%20or%20plugin%20developers%20can%20listen%20on%20these%20events%20to%20do%20some%20job%20like%20logging.%20As%20application%20developers%2C%20we%20can%20listen%20on%20these%20events%20in%20%5Bapp%20start%20script%5D(.%2Fapp-start.md).%0A%0A-%20%60server%60%3A%20every%20worker%20will%20only%20emit%20once%20during%20the%20runtime%2C%20after%20HTTP%20server%20started%2C%20framework%20will%20expose%20HTTP%20server%20instance%20by%20this%20event.%0A-%20%60error%60%3A%20if%20any%20exception%20catched%20by%20onerror%20plugin%2C%20it%20will%20emit%20an%20%60error%60%20event%20with%20the%20exception%20instance%20and%20current%20context%20instance(if%20have)%2C%20developers%20can%20listen%20on%20this%20event%20to%20report%20or%20logging.%0A-%20%60request%60%20and%20%60response%60%3A%20application%20will%20emit%20%60request%60%20and%20%60response%60%20event%20when%20receive%20requests%20and%20ended%20responses%2C%20developers%20can%20listen%20on%20these%20events%20to%20generate%20some%20digest%20log.%0A%0A%60%60%60js%0A%2F%2F%20app.js%0A%0Amodule.exports%20%3D%20app%20%3D%3E%20%7B%0A%20%20app.once('server'%2C%20server%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20websocket%0A%20%20%7D)%3B%0A%20%20app.on('error'%2C%20(err%2C%20ctx)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20report%20error%0A%20%20%7D)%3B%0A%20%20app.on('request'%2C%20ctx%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20log%20receive%20request%0A%20%20%7D)%3B%0A%20%20app.on('response'%2C%20ctx%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20ctx.starttime%20is%20set%20by%20framework%0A%20%20%20%20const%20used%20%3D%20Date.now()%20-%20ctx.starttime%3B%0A%20%20%20%20%2F%2F%20log%20total%20cost%0A%20%20%7D)%3B%0A%7D%3B%0A%60%60%60%0A%0A%23%23%23%20How%20to%20Get%0A%0AApplication%20object%20can%20be%20accessed%20almost%20anywhere%20in%20application%2C%20here%20are%20a%20few%20commonly%20used%20access%20ways%3A%0A%0AAlmost%20all%20files%20(Controller%2C%20Service%2C%20Schedule%2C%20etc.)%20loaded%20by%20the%20%5BLoader%5D%20(..%2Fadvanced%2Floader.md)%20can%20export%20a%20function%20that%20is%20called%20by%20the%20Loader%20and%20uses%20the%20app%20as%20a%20parameter%3A%0A%0A-%20%5BApp%20start%20script%5D(.%2Fapp-start.md)%0A%0A%20%20%60%60%60js%0A%20%20%2F%2F%20app.js%0A%20%20module.exports%20%3D%20app%20%3D%3E%20%7B%0A%20%20%20%20app.cache%20%3D%20new%20Cache()%3B%0A%20%20%7D%3B%0A%20%20%60%60%60%0A%0A-%20%5BController%20file%5D(.%2Fcontroller.md)%0A%0A%20%20%60%60%60js%0A%20%20%2F%2F%20app%2Fcontroller%2Fuser.js%0A%20%20class%20UserController%20extends%20Controller%20%7B%0A%20%20%20%20async%20fetch()%20%7B%0A%20%20%20%20%20%20this.ctx.body%20%3D%20app.cache.get(this.ctx.query.id)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%60%60%60%0A%0ALike%20the%20%5BKoa%5D%2C%20on%20the%20Context%20object%2C%20we%20can%20access%20the%20Application%20object%20via%20%60ctx.app%60.%20Use%20the%20above%20Controller%20file%20as%20an%20example%3A%0A%0A%60%60%60js%0A%2F%2F%20app%2Fcontroller%2Fuser.js%0Aclass%20UserController%20extends%20Controller%20%7B%0A%20%20async%20fetch()%20%7B%0A%20%20%20%20this.ctx.body%20%3D%20this.ctx.app.cache.get(this.ctx.query.id)%3B%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0AIn%20the%20instance%20objects%20that%20inherited%20from%20the%20Controller%20and%20Service%20base%20classes%2C%20the%20Application%20object%20can%20be%20accessed%20via%20%60this.app%60.%0A%0A%60%60%60js%0A%2F%2F%20app%2Fcontroller%2Fuser.js%0Aclass%20UserController%20extends%20Controller%20%7B%0A%20%20async%20fetch()%20%7B%0A%20%20%20%20this.ctx.body%20%3D%20this.app.cache.get(this.ctx.query.id)%3B%0A%20%20%7D%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Context%0A%0AContext%20is%20a%20**request%20level%20object**%2C%20inherited%20from%20%5BKoa.Context%5D.%20When%20a%20request%20is%20received%20every%20time%2C%20the%20framework%20instantiates%20a%20Context%20object%20that%20encapsulates%20the%20information%20requested%20by%20the%20user%20and%20provides%20a%20number%20of%20convenient%20ways%20to%20get%20the%20request%20parameter%20or%20set%20the%20response%20information.%20The%20framework%20will%20mount%20all%20of%20the%20%5BService%5D%20on%20the%20Context%20instance%2C%20and%20some%20plugins%20will%20mount%20some%20other%20methods%20and%20objects%20on%20it%20(%5Begg-sequelize%5D%20will%20mount%20all%20the%20models%20on%20the%20Context).%0A%0A%23%23%23%20How%20to%20Get%0A%0AThe%20most%20common%20way%20to%20get%20the%20Context%20instance%20is%20in%20%5BMiddleware%5D%2C%20%5BController%5D%2C%20and%20%5BService%5D.%20The%20access%20method%20in%20the%20Controller%20is%20shown%20in%20the%20above%20example.%20In%20the%20Service%2C%20the%20access%20way%20is%20same%20as%20Controller.%20The%20access%20Context%20method%20in%20the%20Middleware%20of%20Egg%20is%20same%20as%20%5BKoa%5D%20framework%20gets%20the%20Context%20object%20in%20its%20middleware.%0A%0AThe%20%5BMiddleware%5D%20of%20Egg%20also%20supports%20Koa%20v1%20and%20Koa%20v2%20two%20different%20middleware%20coding%20formats.%20use%20different%20format%2C%20the%20way%20to%20access%20Context%20instance%20is%20also%20slightly%20different%3A%0A%0A%60%60%60js%0A%2F%2F%20Koa%20v1%0Afunction*%20middleware(next)%20%7B%0A%20%20%2F%2F%20this%20is%20instance%20of%20Context%0A%20%20console.log(this.query)%3B%0A%20%20yield%20next%3B%0A%7D%0A%0A%2F%2F%20Koa%20v2%0Aasync%20function%20middleware(ctx%2C%20next)%20%7B%0A%20%20%2F%2F%20ctx%20is%20instance%20of%20Context%0A%20%20console.log(ctx.query)%3B%0A%7D%0A%60%60%60%0A%0AIn%20addition%20to%20the%20request%20can%20get%20the%20Context%20instance%2C%20in%20some%20non-request%20scenario%20we%20need%20to%20access%20service%20%2F%20model%20and%20other%20objects%20on%20the%20Context%20instance%2C%20we%20can%20use%60Application.createAnonymousContext%20()%60%20method%20to%20create%20an%20anonymous%20Context%20instance%3A%0A%0A%60%60%60js%0A%2F%2F%20app.js%0Amodule.exports%20%3D%20app%20%3D%3E%20%7B%0A%20%20app.beforeStart(async%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20ctx%20%3D%20app.createAnonymousContext()%3B%0A%20%20%20%20%2F%2F%20preload%20before%20app%20start%0A%20%20%20%20await%20ctx.service.posts.load()%3B%0A%20%20%7D)%3B%0A%7D%0A%60%60%60%0A%0AEach%20task%20in%20%5BSchedule%5D(.%2Fschedule.md)%20takes%20a%20Context%20instance%20as%20a%20parameter%20so%20that%20we%20can%20more%20easily%20execute%20some%20schedule%20business%20logic%3A%0A%0A%60%60%60js%0A%2F%2F%20app%2Fschedule%2Frefresh.js%0Aexports.task%20%3D%20async%20ctx%20%3D%3E%20%7B%0A%20%20await%20ctx.service.posts.refresh()%3B%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Request%20%26%20Response%0A%0ARequest%20is%20a%20**request%20level%20object**%2C%20inherited%20from%20%5BKoa.Request%5D.%20Encapsulates%20the%20Node.js%20native%20HTTP%20Request%20object%2C%20and%20provides%20a%20set%20of%20helper%20methods%20to%20get%20commonly%20used%20parameters%20of%20HTTP%20requests.%0A%0AResponse%20is%20a%20**request%20level%20object**%2C%20inherited%20from%20%5BKoa.Response%5D.%20Encapsulates%20the%20Node.js%20native%20HTTP%20Response%20object%2C%20and%20provides%20a%20set%20of%20helper%20methods%20to%20set%20the%20HTTP%20response.%0A%0A%23%23%23%20How%20to%20Get%0A%0AWe%20can%20get%20the%20Request(%60ctx.request%60)%20and%20Response%20(%60%20ctx.response%60)%20instances%20of%20the%20current%20request%20on%20the%20Context%20instance.%0A%0A%60%60%60js%0A%2F%2F%20app%2Fcontroller%2Fuser.js%0Aclass%20UserController%20extends%20Controller%20%7B%0A%20%20async%20fetch()%20%7B%0A%20%20%20%20const%20%7B%20app%2C%20ctx%20%7D%20%3D%20this%3B%0A%20%20%20%20const%20id%20%3D%20ctx.request.query.id%3B%0A%20%20%20%20ctx.response.body%20%3D%20app.cache.get(id)%3B%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A-%20%5BKoa%5D%20will%20proxy%20some%20methods%20and%20properties%20of%20Request%20and%20Response%20on%20Context%2C%20see%20%5BKoa.Context%5D.%0A-%20%60ctx.request.query.id%60%20and%60%20ctx.query.id%60%20are%20equivalent%20in%20the%20above%20example%20%2C%20%60ctx.response.body%20%3D%60%20and%20%60ctx.body%20%3D%60%20are%20equivalent.%0A-%20It%20should%20be%20noted%20that%20get%20the%20body%20of%20POST%20should%20use%20%60ctx.request.body%60%20instead%20of%60%20ctx.body%60.%0A%0A%23%23%20Controller%0A%0AEgg%20provides%20a%20Controller%20base%20class%20and%20recommends%20that%20all%20%5BController%5D%20inherit%20from%20the%20base%20class.%20The%20Controller%20base%20class%20has%20the%20following%20properties%3A%0A%0A-%20%60ctx%60%20-%20%5BContext%5D(%23context)%20instance%20of%20the%20current%20request.%0A-%20%60app%60%20-%20%5BApplication%5D(%23application)%20instance.%0A-%20%60config%60%20-%20application%20%5Bconfiguration%5D(.%2Fconfig.md).%0A-%20%60service%60%20-%20all%20%5Bservice%5D(.%2F%20service.md)%20of%20application.%0A-%20%60logger%60%20-%20the%20encapsulated%20logger%20object%20for%20the%20current%20controller.%0A%0AIn%20the%20Controller%20file%2C%20there%20are%20two%20ways%20to%20use%20the%20Controller%20base%20class%3A%0A%0A%60%60%60js%0A%2F%2F%20app%2Fcontroller%2Fuser.js%0A%0A%2F%2F%20get%20from%20egg%20(recommend)%0Aconst%20Controller%20%3D%20require('egg').Controller%3B%0Aclass%20UserController%20extends%20Controller%20%7B%0A%20%20%2F%2F%20implement%0A%7D%0Amodule.exports%20%3D%20UserController%3B%0A%0A%2F%2F%20get%20from%20app%20instance%0Amodule.exports%20%3D%20app%20%3D%3E%20%7B%0A%20%20return%20class%20UserController%20extends%20app.Controller%20%7B%0A%20%20%20%20%2F%2F%20implement%0A%20%20%7D%3B%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Service%0A%0AEgg%20provides%20a%20Service%20base%20class%20and%20recommends%20that%20all%20%5BService%5D%20inherit%20from%20the%20base%20class.%0A%0AThe%20properties%20of%20the%20Service%20base%20class%20are%20the%20same%20as%20those%20of%20the%20%5BController%5D(%23controller)%20base%20class%2C%20the%20access%20method%20is%20similar%3A%0A%0A%60%60%60js%0A%2F%2F%20app%2Fservice%2Fuser.js%0A%0A%2F%2F%20get%20from%20egg%20(recommend)%0Aconst%20Service%20%3D%20require('egg').Service%3B%0Aclass%20UserService%20extends%20Service%20%7B%0A%20%20%2F%2F%20implement%0A%7D%0Amodule.exports%20%3D%20UserService%3B%0A%0A%2F%2F%20get%20from%20app%20instance%0Amodule.exports%20%3D%20app%20%3D%3E%20%7B%0A%20%20return%20class%20UserService%20extends%20app.Service%20%7B%0A%20%20%20%20%2F%2F%20implement%0A%20%20%7D%3B%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Helper%0A%0AHelper%20is%20used%20to%20provide%20some%20useful%20utility%20functions.%20Its%20role%20is%20that%20we%20can%20put%20some%20commonly%20used%20functions%20into%20helper.js%2C%20so%20we%20can%20use%20JavaScript%20to%20write%20complex%20logic%2C%20avoid%20the%20logic%20being%20scattered%20everywhere%2C%20and%20can%20be%20more%20convenient%20to%20write%20test%20cases.%0A%0AThe%20Helper%20itself%20is%20a%20class%20that%20has%20the%20same%20properties%20as%20the%20%5BController%5D(%23controller)%20base%20class%2C%20and%20it%20will%20be%20instantiated%20at%20each%20request%20so%20that%20all%20functions%20on%20the%20Helper%20can%20also%20get%20context%20of%20the%20current%20request.%0A%0A%23%23%23%20How%20to%20Get%0A%0AWe%20can%20get%20the%20Helper(%60ctx.helper%60)%20instance%20of%20the%20current%20request%20on%20the%20Context%20instance.%0A%0A%60%60%60js%0A%2F%2F%20app%2Fcontroller%2Fuser.js%0Aclass%20UserController%20extends%20Controller%20%7B%0A%20%20async%20fetch()%20%7B%0A%20%20%20%20const%20%7B%20app%2C%20ctx%20%7D%20%3D%20this%3B%0A%20%20%20%20const%20id%20%3D%20ctx.query.id%3B%0A%20%20%20%20const%20user%20%3D%20app.cache.get(id)%3B%0A%20%20%20%20ctx.body%20%3D%20ctx.helper.formatUser(user)%3B%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0AIn%20addition%2C%20Helper%20instances%20can%20also%20be%20accessed%20in%20template%2C%20for%20example%2C%20we%20can%20get%20%60shtml%60%20method%20provided%20by%20%5Bsecurity%5D(..%2Fcore%2Fsecurity.md)%20plugin%20%20in%20template.%0A%0A%60%60%60%0A%2F%2F%20app%2Fview%2Fhome.nj%0A%7B%7B%20helper.shtml(value)%20%7D%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20helper%20method%0A%0AIn%20application%20development%2C%20we%20may%20often%20customize%20some%20helper%20methods%2C%20such%20as%20%60formatUser%60%20in%20the%20above%20example%2C%20we%20can%20customize%20helper%20method%20with%20a%20way%20of%20%5Bframework%20extension%5D(.%2Fextend.md%23helper).%0A%0A%60%60%60js%0A%2F%2F%20app%2Fextend%2Fhelper.js%0Amodule.exports%20%3D%20%7B%0A%20%20formatUser(user)%20%7B%0A%20%20%20%20return%20only(user%2C%20%5B%20'name'%2C%20'phone'%20%5D)%3B%0A%20%20%7D%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Config%0A%0AWe%20recommend%20application%20development%20to%20follow%20the%20principle%20of%20configuration%20and%20code%20separation%2C%20put%20hard-coded%20business%20in%20configuration%20file%2C%20and%20the%20configuration%20file%20supports%20different%20runtime%20environments%20using%20different%20configurations%2C%20it%20is%20very%20convenient%20to%20use%20it.%20the%20framework%2C%20plugin%20and%20application-level%20configurations%20are%20available%20via%20the%20Config%20object.%20For%20configuration%20of%20Egg%2C%20read%20%5BConfiguration%5D(.%2Fconfig.md)%20in%20detail.%0A%0A%23%23%23%20How%20to%20Get%0A%0AWe%20can%20get%20the%20config%20object%20from%20the%20Application%20instance%20via%20%60app.config%60%2C%20or%20get%20the%20config%20object%20via%60%20this.config%60%20on%20the%20instance%20of%20Controller%2C%20Service%20or%20Helper.%0A%0A%23%23%20Logger%0A%0AEgg%20builds%20in%20powerful%20%5Blogger%5D(..%2Fcore%2Flogger.md)%2C%20it%20is%20very%20convenient%20to%20print%20a%20variety%20of%20levels%20of%20logs%20to%20the%20corresponding%20log%20file%2C%20each%20logger%20object%20provides%205%20level%20methods%3A%0A%0A-%20%60logger.debug()%60%0A-%20%60logger.info()%60%0A-%20%60logger.warn()%60%0A-%20%60logger.error()%60%0A%0AEgg%20provides%20a%20number%20of%20Logger%20object%2C%20we%20simply%20introduce%20how%20to%20get%20each%20Logger%20and%20its%20use%20scenario.%0A%0A%23%23%23%20App%20Logger%0A%0AWe%20can%20get%20it%20via%20%60app.logger%60.%20If%20we%20want%20to%20do%20some%20application-level%20logging%2C%20such%20as%20logging%20some%20data%20in%20the%20startup%20phase%2C%20logging%20some%20business%20informations%20that%20are%20unrelated%20to%20request%2C%20those%20can%20be%20done%20by%20App%20Logger.%0A%0A%23%23%23%20App%20CoreLogger%0A%0AWe%20can%20get%20it%20via%20%60app.coreLogger%60%2C%20and%20we%20should%20not%20print%20logs%20via%20CoreLogger%20when%20developing%20applications.%20the%20framework%20and%20plugins%20need%20to%20print%20application-level%20logs%20to%20make%20it%20easier%20to%20distinguish%20from%20logs%20printed%20by%20applications%20and%20logs%20printed%20by%20frameworks%2C%20the%20logs%20printed%20by%20the%20CoreLogger%20will%20be%20placed%20in%20a%20different%20file%20than%20the%20Logger.%0A%0A%23%23%23%20Context%20Logger%0A%0AWe%20can%20get%20it%20via%20%60ctx.logger%60%20from%20Context%20instance%2C%20we%20can%20see%20from%20access%20method%2C%20Context%20Logger%20must%20be%20related%20to%20the%20request%2C%20it%20will%20take%20current%20request%20related%20information%20(such%20as%20%60%5B%24userId%2F%24ip%2F%24traceId%2F%24%7Bcost%7Dms%20%24method%20%24url%5D%60)%20in%20the%20front%20of%20logs%2C%20with%20this%20information%2C%20we%20can%20quickly%20locate%20requests%20from%20logs%20and%20concatenate%20all%20logs%20in%20one%20request.%0A%0A%23%23%23%20Context%20CoreLogger%0A%0AWe%20can%20get%20it%20via%20%60ctx.coreLogger%60%2C%20the%20difference%20between%20the%20Context%20Logger%20is%20that%20only%20plugins%20and%20framework%20will%20log%20via%20it.%0A%0A%23%23%23%20Controller%20Logger%20%26%20Service%20Logger%0A%0AWe%20can%20get%20them%20via%20%60this.logger%60%20in%20Controller%20and%20Service%20instance%2C%20they%20are%20essentially%20a%20Context%20Logger%2C%20but%20additional%20file%20path%20will%20be%20added%20to%20logs%2C%20easy%20to%20locate%20the%20log%20print%20location.%0A%0A%23%23%20Subscription%0A%0ASubscription%20is%20a%20common%20model%20for%20subscribing%2C%20for%20example%2C%20the%20consumer%20in%20message%20broker%20or%20schedule%2C%20so%20we%20provide%20the%20Subscription%20base%20class%20to%20normalize%20this%20model.%0A%0AThe%20base%20class%20of%20Subscription%20can%20be%20exported%20in%20the%20following%20way.%0A%0A%60%60%60js%0Aconst%20Subscription%20%3D%20require('egg').Subscription%3B%0A%0Aclass%20Schedule%20extends%20Subscription%20%7B%0A%20%20%2F%2F%20This%20method%20should%20be%20implemented%0A%20%20%2F%2F%20subscribe%20can%20be%20async%20function%20or%20generator%20function%0A%20%20async%20subscribe()%20%7B%7D%0A%7D%0A%60%60%60%0A%0AWe%20recommend%20plugin%20developers%20to%20implement%20based%20on%20this%20model%2C%20For%20example%2C%20%5BSchedule%5D(.%2Fschedule.md).%0A%0A%5BKoa%5D%3A%20http%3A%2F%2Fkoajs.com%0A%5BKoa.Application%5D%3A%20http%3A%2F%2Fkoajs.com%2F%23application%0A%5BKoa.Context%5D%3A%20http%3A%2F%2Fkoajs.com%2F%23context%0A%5BKoa.Request%5D%3A%20http%3A%2F%2Fkoajs.com%2F%23request%0A%5BKoa.Response%5D%3A%20http%3A%2F%2Fkoajs.com%2F%23response%0A%5Begg-sequelize%5D%3A%20https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-sequelize%0A%5BMiddleware%5D%3A%20.%2Fmiddleware.md%0A%5BController%5D%3A%20.%2Fcontroller.md%0A%5BService%5D%3A%20.%2Fservice.md%0A"}}</script><script type="text/javascript" src="/static/js/post.b9faab88.js"></script></body></html>