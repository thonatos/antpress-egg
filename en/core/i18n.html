<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.png"><style class="_styletron_hydrate_"></style><title>I18n Internationalization</title><meta name="description" content="Born to build better enterprise frameworks and apps"><link href="/static/css/post.d62265dc.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="ant-layout" data-reactroot=""><div class="header-module__header___3ADJ9 ant-layout-header"><div class="ant-row-flex"><div class="ant-col-xs-12 ant-col-md-20 ant-col-lg-2"><div class="header-module__logo___3yTXp"><a href="/"><img src="/logo.svg" alt="logo"/></a></div></div><div class="ant-col-xs-0 ant-col-md-0 ant-col-lg-20"><ul class="ant-menu header-module__menu___3yEtW ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-item" role="menuitem"><a href="/en/intro/">Guide</a></li><li class="ant-menu-item" role="menuitem"><a href="/api/">API</a></li><li class="ant-menu-item" role="menuitem"><a href="/en/tutorials/index.html">Tutorials</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/search?q=topic%3Aegg-plugin&amp;type=Repositories">Plugins</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/eggjs/egg/releases">Release</a></li></ul></div><div style="text-align:right" class="ant-col-xs-12 ant-col-md-4 ant-col-lg-2"><button type="button" class="ant-btn"><span>切换语言</span></button></div></div></div><div class="ant-layout-content"><div class="basic_layout-module__content___3flpY ant-layout"><div class="sider-module__side___1Cadj ant-layout-sider ant-layout-sider-light" style="flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"><ul class="ant-menu sider-module__menu___2GqPr ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true"><span>Guide</span><i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/index.html">What is Egg?</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/egg-and-koa.html">Egg and Koa</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/intro/quickstart.html">Quick Start</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/progressive.html">Progressive</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/migration.html">Migration to 2.x</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true"><span>Basis Function</span><i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/structure.html">Directory Structure</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/objects.html">Built-in Objects</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/env.html">Environment</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/config.html">Configuration</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/middleware.html">Middleware</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/router.html">Router</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/controller.html">Controller</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/service.html">Service</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/plugin.html">Plugin</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/schedule.html">Schedule</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/extend.html">Extend</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/basics/app-start.html">Custom Init</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true"><span>Core</span><i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/development.html">Development</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/unittest.html">Unit Testing</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/deployment.html">Deployment</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/logger.html">Logger</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/httpclient.html">HttpClient</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/cookie-and-session.html">Cookie and Session</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/cluster-and-ipc.html">Cluster and IPC</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/view.html">View</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/error-handling.html">Error Handling</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/security.html">Security</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/core/i18n.html">i18n</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="3$Menu" aria-haspopup="true"><span>Tutorials</span><i class="ant-menu-submenu-arrow"></i></div><ul id="3$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/mysql.html">MySQL</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/restful.html">RESTful API</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/passport.html">Passport</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/socketio.html">Socket.IO</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/assets.html">Assets</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/tutorials/typescript.html">TypeScript</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true"><span>Advanced</span><i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/loader.html">Loader</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/plugin.html">Plugin Development</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/framework.html">Framework</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/cluster-client.html">Cluster Enhancement</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/advanced/view-plugin.html">View Plugin</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/style-guide.html">Style Guide</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true"><span>Community</span><i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/plugins/">Plugin List</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/contributing.html">Contributing</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/resource.html">Resource</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/en/faq.html">FAQ</a></li></ul></li></ul></div></div><div class="basic_layout-module__post___2Z7KK ant-layout-content"><div class="ant-row" style="margin-left:-8px;margin-right:-8px"><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-24 ant-col-md-18"><div class="markdown-body" style="font-size:14px"><div><p>For developing the multi-language application, build-in I18n support by <a href="https://github.com/eggjs/egg-i18n">egg-i18n</a> plugin</p><h2 id="default-language">Default Language</h2><p>Default <code>en-US</code>. Assume that we want to switch the default language to Simplified Chinese：</p><pre><code class="language-js">// config/config.default.js
exports.i18n = {
  defaultLocale: &#x27;zh-CN&#x27;,
};</code></pre><h2 id="switch-language">Switch Language</h2><p>Here we have some ways to switch the application&#x27;s current language (Modified records will set to the cookie <code>locale</code>), the next request will use the language setting directly.</p><p>Priority from high to low:</p><ol><li>query: <code>/?locale=en-US</code></li><li>cookie: <code>locale=zh-TW</code></li><li>header: <code>Accept-Language: zh-CN,zh;q=0.5</code></li></ol><p>If want to modify parameter name of query or cookie</p><pre><code class="language-js">// config/config.default.js
exports.i18n = {
  queryField: &#x27;locale&#x27;,
  cookieField: &#x27;locale&#x27;,
  // Cookie default expired after one year, the unit is ms if set as Number
  cookieMaxAge: &#x27;1y&#x27;,
};</code></pre><h2 id="writing-i18n-multi-language-documents">Writing I18n Multi-language Documents</h2><p>Configuration of multi-language are independent, stored in <code>config/locale/*.js</code></p><pre><code>- config/locale/
  - en-US.js
  - zh-CN.js
  - zh-TW.js</code></pre><p>Not only take effects in the application directory, but also in the directory of framework or plugin <code>config/locale</code></p><p> <strong>Note: It&#x27;s locale, not locals.</strong></p><p>Example:</p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  Email: &#x27;邮箱&#x27;,
};</code></pre><p>Or using JSON file:</p><pre><code class="language-json">// config/locale/zh-CN.json
{
  &quot;Email&quot;: &quot;邮箱&quot;
}</code></pre><h2 id="getting-multi-language-texts">Getting Multi-language Texts</h2><p>Use <code>__</code> (Alias: <code>gettext</code>) function to get the multi-language texts under locale directory</p><p><strong>Note: `</strong>` is two underscores__</p><p>Take above multi-language configuration as example:</p><pre><code class="language-js">ctx.__(&#x27;Email&#x27;)
// zh-CN =&gt; 邮箱
// en-US =&gt; Email</code></pre><p>If texts contain format function like <code>%s</code>，<code>%j</code>, we can call by the way similar to <a href="https://nodejs.org/api/util.html#util_util_format_format_args"><code>util.format()</code></a></p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  &#x27;Welcome back, %s!&#x27;: &#x27;欢迎回来，%s!&#x27;,
};

ctx.__(&#x27;Welcome back, %s!&#x27;, &#x27;Shawn&#x27;);
// zh-CN =&gt; 欢迎回来，Shawn!
// en-US =&gt; Welcome back, Shawn!</code></pre><p>Support array, subscript and placeholder, such as</p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  &#x27;Hello {0}! My name is {1}.&#x27;: &#x27;你好 {0}! 我的名字叫 {1}。&#x27;,
};

ctx.__(&#x27;Hello {0}! My name is {1}.&#x27;, [&#x27;foo&#x27;, &#x27;bar&#x27;])
// zh-CN =&gt; 你好 foo！我的名字叫 bar。
// en-US =&gt; Hello foo! My name is bar.</code></pre><h3 id="use-in-controller">Use in Controller</h3><pre><code class="language-js">class HomeController extends Controller {
  async index() {
    const ctx = this.ctx;
    ctx.body = {
      message: ctx.__(&#x27;Welcome back, %s!&#x27;, ctx.user.name)
      // or use gettext, it is a alias of __ function
      // message: ctx.gettext(&#x27;Welcome back&#x27;, ctx.user.name)
      user: ctx.user,
    };
  }
}</code></pre><h3 id="use-in-view">Use in View</h3><p>Assume we are using template engine <a href="https://github.com/eggjs/egg-view-nunjucks">Nunjucks</a></p><pre><code class="language-html">&lt;li&gt;{{ __(&#x27;Email&#x27;) }}: {{ user.email }}&lt;/li&gt;
&lt;li&gt;
  {{ __(&#x27;Welcome back, %s!&#x27;, user.name) }}
&lt;/li&gt;
&lt;li&gt;
  {{ __(&#x27;Hello {0}! My name is {1}.&#x27;, [&#x27;foo&#x27;, &#x27;bar&#x27;]) }}
&lt;/li&gt;</code></pre></div></div></div><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-0 ant-col-md-6"><div class="markdown-body" style="font-size:14px"><div><ul><li><a href="#default-language">Default Language</a></li><li><a href="#switch-language">Switch Language</a></li><li><a href="#writing-i18n-multi-language-documents">Writing I18n Multi-language Documents</a></li><li><a href="#getting-multi-language-texts">Getting Multi-language Texts</a><ul><li><a href="#use-in-controller">Use in Controller</a></li><li><a href="#use-in-view">Use in View</a></li></ul></li></ul></div></div></div></div></div></div></div></div></div><script type="text/javascript">window.__INIT_STATE__={"lang":"en","props":{"toc":"-%20%5BDefault%20Language%5D(%23default-language)%0A-%20%5BSwitch%20Language%5D(%23switch-language)%0A-%20%5BWriting%20I18n%20Multi-language%20Documents%5D(%23writing-i18n-multi-language-documents)%0A-%20%5BGetting%20Multi-language%20Texts%5D(%23getting-multi-language-texts)%0A%20%20*%20%5BUse%20in%20Controller%5D(%23use-in-controller)%0A%20%20*%20%5BUse%20in%20View%5D(%23use-in-view)","meta":{"info":{"title":"I18n Internationalization"}},"content":"%0A%0A%0AFor%20developing%20the%20multi-language%20application%2C%20build-in%20I18n%20support%20by%20%5Begg-i18n%5D(https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-i18n)%20plugin%0A%0A%23%23%20Default%20Language%0A%0ADefault%20%60en-US%60.%20Assume%20that%20we%20want%20to%20switch%20the%20default%20language%20to%20Simplified%20Chinese%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0Aexports.i18n%20%3D%20%7B%0A%20%20defaultLocale%3A%20'zh-CN'%2C%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Switch%20Language%0A%0AHere%20we%20have%20some%20ways%20to%20switch%20the%20application's%20current%20language%20(Modified%20records%20will%20set%20to%20the%20cookie%20%60locale%60)%2C%20the%20next%20request%20will%20use%20the%20language%20setting%20directly.%0A%0APriority%20from%20high%20to%20low%3A%0A%0A1.%20query%3A%20%60%2F%3Flocale%3Den-US%60%0A2.%20cookie%3A%20%60locale%3Dzh-TW%60%0A3.%20header%3A%20%60Accept-Language%3A%20zh-CN%2Czh%3Bq%3D0.5%60%0A%0AIf%20want%20to%20modify%20parameter%20name%20of%20query%20or%20cookie%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0Aexports.i18n%20%3D%20%7B%0A%20%20queryField%3A%20'locale'%2C%0A%20%20cookieField%3A%20'locale'%2C%0A%20%20%2F%2F%20Cookie%20default%20expired%20after%20one%20year%2C%20the%20unit%20is%20ms%20if%20set%20as%20Number%0A%20%20cookieMaxAge%3A%20'1y'%2C%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20Writing%20I18n%20Multi-language%20Documents%0A%0AConfiguration%20of%20multi-language%20are%20independent%2C%20stored%20in%20%60config%2Flocale%2F*.js%60%0A%0A%60%60%60%0A-%20config%2Flocale%2F%0A%20%20-%20en-US.js%0A%20%20-%20zh-CN.js%0A%20%20-%20zh-TW.js%0A%60%60%60%0A%0ANot%20only%20take%20effects%20in%20the%20application%20directory%2C%20but%20also%20in%20the%20directory%20of%20framework%20or%20plugin%20%60config%2Flocale%60%0A%0A%20**Note%3A%20It's%20locale%2C%20not%20locals.**%0A%0AExample%3A%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20Email%3A%20'%E9%82%AE%E7%AE%B1'%2C%0A%7D%3B%0A%60%60%60%0A%0AOr%20using%20JSON%20file%3A%0A%0A%60%60%60json%0A%2F%2F%20config%2Flocale%2Fzh-CN.json%0A%7B%0A%20%20%22Email%22%3A%20%22%E9%82%AE%E7%AE%B1%22%0A%7D%0A%60%60%60%0A%0A%23%23%20Getting%20Multi-language%20Texts%0A%0AUse%20%60__%60%20(Alias%3A%20%60gettext%60)%20function%20to%20get%20the%20multi-language%20texts%20under%20locale%20directory%0A%0A__Note%3A%20%60__%60%20is%20two%20underscores__%0A%0ATake%20above%20multi-language%20configuration%20as%20example%3A%0A%0A%60%60%60js%0Actx.__('Email')%0A%2F%2F%20zh-CN%20%3D%3E%20%E9%82%AE%E7%AE%B1%0A%2F%2F%20en-US%20%3D%3E%20Email%0A%60%60%60%0A%0AIf%20texts%20contain%20format%20function%20like%20%60%25s%60%EF%BC%8C%60%25j%60%2C%20we%20can%20call%20by%20the%20way%20similar%20to%20%5B%60util.format()%60%5D(https%3A%2F%2Fnodejs.org%2Fapi%2Futil.html%23util_util_format_format_args)%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20'Welcome%20back%2C%20%25s!'%3A%20'%E6%AC%A2%E8%BF%8E%E5%9B%9E%E6%9D%A5%EF%BC%8C%25s!'%2C%0A%7D%3B%0A%0Actx.__('Welcome%20back%2C%20%25s!'%2C%20'Shawn')%3B%0A%2F%2F%20zh-CN%20%3D%3E%20%E6%AC%A2%E8%BF%8E%E5%9B%9E%E6%9D%A5%EF%BC%8CShawn!%0A%2F%2F%20en-US%20%3D%3E%20Welcome%20back%2C%20Shawn!%0A%60%60%60%0A%0ASupport%20array%2C%20subscript%20and%20placeholder%2C%20such%20as%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20'Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%3A%20'%E4%BD%A0%E5%A5%BD%20%7B0%7D!%20%E6%88%91%E7%9A%84%E5%90%8D%E5%AD%97%E5%8F%AB%20%7B1%7D%E3%80%82'%2C%0A%7D%3B%0A%0Actx.__('Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%2C%20%5B'foo'%2C%20'bar'%5D)%0A%2F%2F%20zh-CN%20%3D%3E%20%E4%BD%A0%E5%A5%BD%20foo%EF%BC%81%E6%88%91%E7%9A%84%E5%90%8D%E5%AD%97%E5%8F%AB%20bar%E3%80%82%0A%2F%2F%20en-US%20%3D%3E%20Hello%20foo!%20My%20name%20is%20bar.%0A%60%60%60%0A%0A%23%23%23%20Use%20in%20Controller%0A%0A%60%60%60js%0Aclass%20HomeController%20extends%20Controller%20%7B%0A%20%20async%20index()%20%7B%0A%20%20%20%20const%20ctx%20%3D%20this.ctx%3B%0A%20%20%20%20ctx.body%20%3D%20%7B%0A%20%20%20%20%20%20message%3A%20ctx.__('Welcome%20back%2C%20%25s!'%2C%20ctx.user.name)%0A%20%20%20%20%20%20%2F%2F%20or%20use%20gettext%2C%20it%20is%20a%20alias%20of%20__%20function%0A%20%20%20%20%20%20%2F%2F%20message%3A%20ctx.gettext('Welcome%20back'%2C%20ctx.user.name)%0A%20%20%20%20%20%20user%3A%20ctx.user%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Use%20in%20View%0A%0AAssume%20we%20are%20using%20template%20engine%20%5BNunjucks%5D(https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-view-nunjucks)%0A%0A%60%60%60html%0A%3Cli%3E%7B%7B%20__('Email')%20%7D%7D%3A%20%7B%7B%20user.email%20%7D%7D%3C%2Fli%3E%0A%3Cli%3E%0A%20%20%7B%7B%20__('Welcome%20back%2C%20%25s!'%2C%20user.name)%20%7D%7D%0A%3C%2Fli%3E%0A%3Cli%3E%0A%20%20%7B%7B%20__('Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%2C%20%5B'foo'%2C%20'bar'%5D)%20%7D%7D%0A%3C%2Fli%3E%0A%60%60%60%0A"}}</script><script type="text/javascript" src="/static/js/post.b9faab88.js"></script></body></html>