<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.png"><style class="_styletron_hydrate_"></style><title>运行环境</title><meta name="description" content="Born to build better enterprise frameworks and apps"><link href="/static/css/post.d62265dc.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="ant-layout" data-reactroot=""><div class="header-module__header___3ADJ9 ant-layout-header"><div class="ant-row-flex"><div class="ant-col-xs-12 ant-col-md-20 ant-col-lg-2"><div class="header-module__logo___3yTXp"><a href="/"><img src="/logo.svg" alt="logo"/></a></div></div><div class="ant-col-xs-0 ant-col-md-0 ant-col-lg-20"><ul class="ant-menu header-module__menu___3yEtW ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/intro/">指南</a></li><li class="ant-menu-item" role="menuitem"><a href="/api/">API</a></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/tutorials/index.html">教程</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/search?q=topic%3Aegg-plugin&amp;type=Repositories">插件</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/eggjs/egg/releases">发布日志</a></li></ul></div><div style="text-align:right" class="ant-col-xs-12 ant-col-md-4 ant-col-lg-2"><button type="button" class="ant-btn"><span>Languages</span></button></div></div></div><div class="ant-layout-content"><div class="basic_layout-module__content___3flpY ant-layout"><div class="sider-module__side___1Cadj ant-layout-sider ant-layout-sider-light" style="flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"><ul class="ant-menu sider-module__menu___2GqPr ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true"><span>新手指南</span><i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/index.html">Egg.js 是什么?</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/egg-and-koa.html">Egg.js 和 Koa</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/quickstart.html">快速入门</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/progressive.html">渐进式开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/migration.html">2.x 升级指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true"><span>基础功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/structure.html">目录结构</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/objects.html">内置对象</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/env.html">运行环境</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/config.html">配置</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/middleware.html">中间件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/router.html">Router</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/controller.html">Controller</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/service.html">Service</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/plugin.html">插件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/schedule.html">定时任务</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/extend.html">框架扩展</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/app-start.html">启动自定义</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true"><span>核心功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/development.html">本地开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/unittest.html">单元测试</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/deployment.html">应用部署</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/logger.html">日志</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/httpclient.html">HttpClient</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cookie-and-session.html">Cookie and Session</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cluster-and-ipc.html">多进程模型和进程间通讯</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/view.html">模板渲染</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/error-handling.html">异常处理</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/security.html">安全</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/i18n.html">国际化</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="3$Menu" aria-haspopup="true"><span>教程</span><i class="ant-menu-submenu-arrow"></i></div><ul id="3$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/mysql.html">MySQL</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/restful.html">RESTful API</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/passport.html">Passport 鉴权</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/socketio.html">Socket.IO</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/assets.html">静态资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/typescript.html">TypeScript</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true"><span>进阶</span><i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/loader.html">Loader</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/plugin.html">插件开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/framework.html">框架开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/cluster-client.html">多进程研发模式增强</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/view-plugin.html">模板插件开发规范</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/style-guide.html">代码风格指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true"><span>社区</span><i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/plugins/">内置插件列表</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/contributing.html">如何贡献</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/resource.html">资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/faq.html">常见问题</a></li></ul></li></ul></div></div><div class="basic_layout-module__post___2Z7KK ant-layout-content"><div class="ant-row" style="margin-left:-8px;margin-right:-8px"><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-24 ant-col-md-18"><div class="markdown-body" style="font-size:14px"><div><p>一个 Web 应用本身应该是无状态的，并拥有根据运行环境设置自身的能力。</p><h2 id="指定运行环境">指定运行环境</h2><p>框架有两种方式指定运行环境：</p><ol><li>通过 <code>config/env</code> 文件指定，该文件的内容就是运行环境，如 <code>prod</code>。一般通过构建工具来生成这个文件。</li><li>通过 <code>EGG_SERVER_ENV</code> 环境变量指定。</li></ol><p>其中，方式 2 比较常用，因为通过 <code>EGG_SERVER_ENV</code> 环境变量指定运行环境更加方便，比如在生产环境启动应用：</p><pre><code class="language-shell">EGG_SERVER_ENV=prod npm start</code></pre><h2 id="应用内获取运行环境">应用内获取运行环境</h2><p>框架提供了变量 <code>app.config.env</code> 来表示应用当前的运行环境。</p><h2 id="运行环境相关配置">运行环境相关配置</h2><p>不同的运行环境会对应不同的配置，具体请阅读 <a href="./config.md">Config 配置</a>。</p><h2 id="与-node_env-的区别">与 NODE_ENV 的区别</h2><p>很多 Node.js 应用会使用 <code>NODE_ENV</code> 来区分运行环境，但 <code>EGG_SERVER_ENV</code> 区分得更加精细。一般的项目开发流程包括本地开发环境、测试环境、生产环境等，除了本地开发环境和测试环境外，其他环境可统称为<strong>服务器环境</strong>，服务器环境的 <code>NODE_ENV</code> 应该为 <code>production</code>。而且 npm 也会使用这个变量，在应用部署的时候一般不会安装 devDependencies，所以这个值也应该为 <code>production</code>。</p><p>框架默认支持的运行环境及映射关系（如果未指定 <code>EGG_SERVER_ENV</code> 会根据 <code>NODE_ENV</code> 来匹配）</p><table><thead><tr><th>NODE_ENV</th><th>EGG_SERVER_ENV</th><th>说明</th></tr></thead><tbody><tr><td></td><td>local</td><td>本地开发环境</td></tr><tr><td>test</td><td>unittest</td><td>单元测试</td></tr><tr><td>production</td><td>prod</td><td>生产环境</td></tr></tbody></table><p>例如，当 <code>NODE_ENV</code> 为 <code>production</code> 而 <code>EGG_SERVER_ENV</code> 未指定时，框架会将 <code>EGG_SERVER_ENV</code> 设置成 <code>prod</code>。</p><h2 id="自定义环境">自定义环境</h2><p>常规开发流程可能不仅仅只有以上几种环境，Egg 支持自定义环境来适应自己的开发流程。</p><p>比如，要为开发流程增加集成测试环境 SIT。将 <code>EGG_SERVER_ENV</code> 设置成 <code>sit</code>（并建议设置 <code>NODE_ENV = production</code>），启动时会加载 <code>config/config.sit.js</code>，运行环境变量 <code>app.config.env</code> 会被设置成 <code>sit</code>。</p><h2 id="与-koa-的区别">与 Koa 的区别</h2><p>在 Koa 中我们通过 <code>app.env</code> 来进行环境判断，<code>app.env</code> 默认的值是 <code>process.env.NODE_ENV</code>。但是在 Egg（和基于 Egg 的框架）中，配置统一都放置在 <code>app.config</code> 上，所以我们需要通过 <code>app.config.env</code> 来区分环境，<code>app.env</code> 不再使用。</p></div></div></div><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-0 ant-col-md-6"><div class="markdown-body" style="font-size:14px"><div><ul><li><a href="#%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">指定运行环境</a></li><li><a href="#%E5%BA%94%E7%94%A8%E5%86%85%E8%8E%B7%E5%8F%96%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">应用内获取运行环境</a></li><li><a href="#%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">运行环境相关配置</a></li><li><a href="#%E4%B8%8E-node_env-%E7%9A%84%E5%8C%BA%E5%88%AB">与 NODE_ENV 的区别</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8E%AF%E5%A2%83">自定义环境</a></li><li><a href="#%E4%B8%8E-koa-%E7%9A%84%E5%8C%BA%E5%88%AB">与 Koa 的区别</a></li></ul></div></div></div></div></div></div></div></div></div><script type="text/javascript">window.__INIT_STATE__={"lang":"zh","props":{"toc":"-%20%5B%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%5D(%23%25E6%258C%2587%25E5%25AE%259A%25E8%25BF%2590%25E8%25A1%258C%25E7%258E%25AF%25E5%25A2%2583)%0A-%20%5B%E5%BA%94%E7%94%A8%E5%86%85%E8%8E%B7%E5%8F%96%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%5D(%23%25E5%25BA%2594%25E7%2594%25A8%25E5%2586%2585%25E8%258E%25B7%25E5%258F%2596%25E8%25BF%2590%25E8%25A1%258C%25E7%258E%25AF%25E5%25A2%2583)%0A-%20%5B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%5D(%23%25E8%25BF%2590%25E8%25A1%258C%25E7%258E%25AF%25E5%25A2%2583%25E7%259B%25B8%25E5%2585%25B3%25E9%2585%258D%25E7%25BD%25AE)%0A-%20%5B%E4%B8%8E%20NODE_ENV%20%E7%9A%84%E5%8C%BA%E5%88%AB%5D(%23%25E4%25B8%258E-node_env-%25E7%259A%2584%25E5%258C%25BA%25E5%2588%25AB)%0A-%20%5B%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8E%AF%E5%A2%83%5D(%23%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589%25E7%258E%25AF%25E5%25A2%2583)%0A-%20%5B%E4%B8%8E%20Koa%20%E7%9A%84%E5%8C%BA%E5%88%AB%5D(%23%25E4%25B8%258E-koa-%25E7%259A%2584%25E5%258C%25BA%25E5%2588%25AB)","meta":{"info":{"title":"运行环境"}},"content":"%0A%0A%0A%E4%B8%80%E4%B8%AA%20Web%20%E5%BA%94%E7%94%A8%E6%9C%AC%E8%BA%AB%E5%BA%94%E8%AF%A5%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E5%B9%B6%E6%8B%A5%E6%9C%89%E6%A0%B9%E6%8D%AE%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE%E8%87%AA%E8%BA%AB%E7%9A%84%E8%83%BD%E5%8A%9B%E3%80%82%0A%0A%23%23%20%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%0A%0A%E6%A1%86%E6%9E%B6%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%9A%0A%0A1.%20%E9%80%9A%E8%BF%87%C2%A0%60config%2Fenv%60%20%E6%96%87%E4%BB%B6%E6%8C%87%E5%AE%9A%EF%BC%8C%E8%AF%A5%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E5%B0%B1%E6%98%AF%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%8C%E5%A6%82%20%60prod%60%E3%80%82%E4%B8%80%E8%88%AC%E9%80%9A%E8%BF%87%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E6%9D%A5%E7%94%9F%E6%88%90%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82%0A2.%20%E9%80%9A%E8%BF%87%20%60EGG_SERVER_ENV%60%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%8C%87%E5%AE%9A%E3%80%82%0A%0A%E5%85%B6%E4%B8%AD%EF%BC%8C%E6%96%B9%E5%BC%8F%202%20%E6%AF%94%E8%BE%83%E5%B8%B8%E7%94%A8%EF%BC%8C%E5%9B%A0%E4%B8%BA%E9%80%9A%E8%BF%87%20%60EGG_SERVER_ENV%60%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E6%9B%B4%E5%8A%A0%E6%96%B9%E4%BE%BF%EF%BC%8C%E6%AF%94%E5%A6%82%E5%9C%A8%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%EF%BC%9A%0A%0A%60%60%60shell%0AEGG_SERVER_ENV%3Dprod%20npm%20start%0A%60%60%60%0A%0A%23%23%20%E5%BA%94%E7%94%A8%E5%86%85%E8%8E%B7%E5%8F%96%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%0A%0A%E6%A1%86%E6%9E%B6%E6%8F%90%E4%BE%9B%E4%BA%86%E5%8F%98%E9%87%8F%20%60app.config.env%60%20%E6%9D%A5%E8%A1%A8%E7%A4%BA%E5%BA%94%E7%94%A8%E5%BD%93%E5%89%8D%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E3%80%82%0A%0A%23%23%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%0A%0A%E4%B8%8D%E5%90%8C%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E4%BC%9A%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%85%B7%E4%BD%93%E8%AF%B7%E9%98%85%E8%AF%BB%20%5BConfig%20%E9%85%8D%E7%BD%AE%5D(.%2Fconfig.md)%E3%80%82%0A%0A%23%23%20%E4%B8%8E%20NODE_ENV%20%E7%9A%84%E5%8C%BA%E5%88%AB%0A%0A%E5%BE%88%E5%A4%9A%20Node.js%20%E5%BA%94%E7%94%A8%E4%BC%9A%E4%BD%BF%E7%94%A8%20%60NODE_ENV%60%20%E6%9D%A5%E5%8C%BA%E5%88%86%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%8C%E4%BD%86%20%60EGG_SERVER_ENV%60%20%E5%8C%BA%E5%88%86%E5%BE%97%E6%9B%B4%E5%8A%A0%E7%B2%BE%E7%BB%86%E3%80%82%E4%B8%80%E8%88%AC%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%8C%85%E6%8B%AC%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%81%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E3%80%81%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%AD%89%EF%BC%8C%E9%99%A4%E4%BA%86%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E5%A4%96%EF%BC%8C%E5%85%B6%E4%BB%96%E7%8E%AF%E5%A2%83%E5%8F%AF%E7%BB%9F%E7%A7%B0%E4%B8%BA**%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83**%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83%E7%9A%84%20%60NODE_ENV%60%20%E5%BA%94%E8%AF%A5%E4%B8%BA%20%60production%60%E3%80%82%E8%80%8C%E4%B8%94%20npm%20%E4%B9%9F%E4%BC%9A%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E5%8F%98%E9%87%8F%EF%BC%8C%E5%9C%A8%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%80%E8%88%AC%E4%B8%8D%E4%BC%9A%E5%AE%89%E8%A3%85%20devDependencies%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E4%B8%AA%E5%80%BC%E4%B9%9F%E5%BA%94%E8%AF%A5%E4%B8%BA%20%60production%60%E3%80%82%0A%0A%E6%A1%86%E6%9E%B6%E9%BB%98%E8%AE%A4%E6%94%AF%E6%8C%81%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%8F%8A%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%88%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%20%60EGG_SERVER_ENV%60%20%E4%BC%9A%E6%A0%B9%E6%8D%AE%20%60NODE_ENV%60%20%E6%9D%A5%E5%8C%B9%E9%85%8D%EF%BC%89%0A%0A%7C%20NODE_ENV%20%20%20%7C%20EGG_SERVER_ENV%20%7C%20%E8%AF%B4%E6%98%8E%20%20%20%20%20%20%20%20%20%7C%0A%7C%20----------%20%7C%20--------------%20%7C%20------------%20%7C%0A%7C%20%20%20%20%20%20%20%20%20%20%20%20%7C%20local%20%20%20%20%20%20%20%20%20%20%7C%20%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%20%7C%0A%7C%20test%20%20%20%20%20%20%20%7C%20unittest%20%20%20%20%20%20%20%7C%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20%20%20%20%20%7C%0A%7C%20production%20%7C%20prod%20%20%20%20%20%20%20%20%20%20%20%7C%20%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%20%20%20%20%20%7C%0A%0A%E4%BE%8B%E5%A6%82%EF%BC%8C%E5%BD%93%20%60NODE_ENV%60%20%E4%B8%BA%20%60production%60%20%E8%80%8C%20%60EGG_SERVER_ENV%60%20%E6%9C%AA%E6%8C%87%E5%AE%9A%E6%97%B6%EF%BC%8C%E6%A1%86%E6%9E%B6%E4%BC%9A%E5%B0%86%20%60EGG_SERVER_ENV%60%20%E8%AE%BE%E7%BD%AE%E6%88%90%20%60prod%60%E3%80%82%0A%0A%23%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8E%AF%E5%A2%83%0A%0A%E5%B8%B8%E8%A7%84%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%8F%AF%E8%83%BD%E4%B8%8D%E4%BB%85%E4%BB%85%E5%8F%AA%E6%9C%89%E4%BB%A5%E4%B8%8A%E5%87%A0%E7%A7%8D%E7%8E%AF%E5%A2%83%EF%BC%8CEgg%20%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8E%AF%E5%A2%83%E6%9D%A5%E9%80%82%E5%BA%94%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E3%80%82%0A%0A%E6%AF%94%E5%A6%82%EF%BC%8C%E8%A6%81%E4%B8%BA%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%A2%9E%E5%8A%A0%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%20SIT%E3%80%82%E5%B0%86%20%60EGG_SERVER_ENV%60%20%E8%AE%BE%E7%BD%AE%E6%88%90%20%60sit%60%EF%BC%88%E5%B9%B6%E5%BB%BA%E8%AE%AE%E8%AE%BE%E7%BD%AE%20%60NODE_ENV%20%3D%20production%60%EF%BC%89%EF%BC%8C%E5%90%AF%E5%8A%A8%E6%97%B6%E4%BC%9A%E5%8A%A0%E8%BD%BD%20%60config%2Fconfig.sit.js%60%EF%BC%8C%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20%60app.config.env%60%20%E4%BC%9A%E8%A2%AB%E8%AE%BE%E7%BD%AE%E6%88%90%20%60sit%60%E3%80%82%0A%0A%23%23%20%E4%B8%8E%20Koa%20%E7%9A%84%E5%8C%BA%E5%88%AB%0A%0A%E5%9C%A8%20Koa%20%E4%B8%AD%E6%88%91%E4%BB%AC%E9%80%9A%E8%BF%87%20%60app.env%60%20%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%88%A4%E6%96%AD%EF%BC%8C%60app.env%60%20%E9%BB%98%E8%AE%A4%E7%9A%84%E5%80%BC%E6%98%AF%20%60process.env.NODE_ENV%60%E3%80%82%E4%BD%86%E6%98%AF%E5%9C%A8%20Egg%EF%BC%88%E5%92%8C%E5%9F%BA%E4%BA%8E%20Egg%20%E7%9A%84%E6%A1%86%E6%9E%B6%EF%BC%89%E4%B8%AD%EF%BC%8C%E9%85%8D%E7%BD%AE%E7%BB%9F%E4%B8%80%E9%83%BD%E6%94%BE%E7%BD%AE%E5%9C%A8%20%60app.config%60%20%E4%B8%8A%EF%BC%8C%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E9%80%9A%E8%BF%87%20%60app.config.env%60%20%E6%9D%A5%E5%8C%BA%E5%88%86%E7%8E%AF%E5%A2%83%EF%BC%8C%60app.env%60%20%E4%B8%8D%E5%86%8D%E4%BD%BF%E7%94%A8%E3%80%82%0A"}}</script><script type="text/javascript" src="/static/js/post.b9faab88.js"></script></body></html>