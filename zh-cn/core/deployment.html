<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.png"><style class="_styletron_hydrate_"></style><title>应用部署</title><meta name="description" content="Born to build better enterprise frameworks and apps"><link href="/static/css/post.d62265dc.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="ant-layout" data-reactroot=""><div class="header-module__header___3ADJ9 ant-layout-header"><div class="ant-row-flex"><div class="ant-col-xs-12 ant-col-md-20 ant-col-lg-2"><div class="header-module__logo___3yTXp"><a href="/"><img src="/logo.svg" alt="logo"/></a></div></div><div class="ant-col-xs-0 ant-col-md-0 ant-col-lg-20"><ul class="ant-menu header-module__menu___3yEtW ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/intro/">指南</a></li><li class="ant-menu-item" role="menuitem"><a href="/api/">API</a></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/tutorials/index.html">教程</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/search?q=topic%3Aegg-plugin&amp;type=Repositories">插件</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/eggjs/egg/releases">发布日志</a></li></ul></div><div style="text-align:right" class="ant-col-xs-12 ant-col-md-4 ant-col-lg-2"><button type="button" class="ant-btn"><span>Languages</span></button></div></div></div><div class="ant-layout-content"><div class="basic_layout-module__content___3flpY ant-layout"><div class="sider-module__side___1Cadj ant-layout-sider ant-layout-sider-light" style="flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"><ul class="ant-menu sider-module__menu___2GqPr ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true"><span>新手指南</span><i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/index.html">Egg.js 是什么?</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/egg-and-koa.html">Egg.js 和 Koa</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/quickstart.html">快速入门</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/progressive.html">渐进式开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/migration.html">2.x 升级指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true"><span>基础功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/structure.html">目录结构</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/objects.html">内置对象</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/env.html">运行环境</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/config.html">配置</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/middleware.html">中间件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/router.html">Router</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/controller.html">Controller</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/service.html">Service</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/plugin.html">插件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/schedule.html">定时任务</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/extend.html">框架扩展</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/app-start.html">启动自定义</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true"><span>核心功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/development.html">本地开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/unittest.html">单元测试</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/deployment.html">应用部署</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/logger.html">日志</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/httpclient.html">HttpClient</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cookie-and-session.html">Cookie and Session</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cluster-and-ipc.html">多进程模型和进程间通讯</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/view.html">模板渲染</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/error-handling.html">异常处理</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/security.html">安全</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/i18n.html">国际化</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="3$Menu" aria-haspopup="true"><span>教程</span><i class="ant-menu-submenu-arrow"></i></div><ul id="3$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/mysql.html">MySQL</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/restful.html">RESTful API</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/passport.html">Passport 鉴权</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/socketio.html">Socket.IO</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/assets.html">静态资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/typescript.html">TypeScript</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true"><span>进阶</span><i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/loader.html">Loader</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/plugin.html">插件开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/framework.html">框架开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/cluster-client.html">多进程研发模式增强</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/view-plugin.html">模板插件开发规范</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/style-guide.html">代码风格指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true"><span>社区</span><i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/plugins/">内置插件列表</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/contributing.html">如何贡献</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/resource.html">资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/faq.html">常见问题</a></li></ul></li></ul></div></div><div class="basic_layout-module__post___2Z7KK ant-layout-content"><div class="ant-row" style="margin-left:-8px;margin-right:-8px"><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-24 ant-col-md-18"><div class="markdown-body" style="font-size:14px"><div><p>在<a href="./development.md">本地开发</a>时，我们使用 <code>egg-bin dev</code> 来启动服务，但是在部署应用的时候不可以这样使用。因为 <code>egg-bin dev</code> 会针对本地开发做很多处理，而生产运行需要一个更加简单稳定的方式。所以本章主要讲解如何部署你的应用。</p><p>一般从源码代码到真正运行，我们会拆分成构建和部署两步，可以做到<strong>一次构建多次部署</strong>。</p><h2 id="构建">构建</h2><p>JavaScript 语言本身不需要编译的，构建过程主要是下载依赖。但如果使用 TypeScript 或者 Babel 支持 ES6 以上的特性，那就必须要这一步了。</p><p>一般安装依赖会指定 <code>NODE_ENV=production</code> 或 <code>npm install --production</code> 只安装 dependencies 的依赖。因为 devDependencies 中的模块过大而且在生产环境不会使用，安装后也可能遇到未知问题。</p><pre><code class="language-bash">$ cd baseDir
$ npm install --production
$ tar -zcvf ../release.tgz .</code></pre><p>构建完成后打包成 tgz 文件，部署的时候解压启动就可以了。</p><p>增加构建环节才能做到真正的<strong>一次构建多次部署</strong>，理论上代码没有改动的时候是不需要再次构建的，可以用原来的包进行部署，这有着不少好处：</p><ul><li>构建依赖的环境和运行时是有差异的，所以不要污染运行时环境。</li><li>可以减少发布的时间，而且易回滚，只需要把原来的包重新启动即可。</li></ul><h2 id="部署">部署</h2><p>服务器需要预装 Node.js，框架支持的 Node 版本为 <code>&gt;= 8.0.0</code>。</p><p>框架内置了 <a href="https://github.com/eggjs/egg-cluster">egg-cluster</a> 来启动 <a href="./cluster-and-ipc.md#master">Master 进程</a>，Master 有足够的稳定性，不再需要使用 <a href="https://github.com/Unitech/pm2">pm2</a> 等进程守护模块。</p><p>同时，框架也提供了 <a href="https://github.com/eggjs/egg-scripts">egg-scripts</a> 来支持线上环境的运行和停止。</p><p>首先，我们需要把 <code>egg-scripts</code> 模块作为 <code>dependencies</code> 引入：</p><pre><code class="language-bash">$ npm i egg-scripts --save</code></pre><p>添加 <code>npm scripts</code> 到 <code>package.json</code>：</p><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;egg-scripts start --daemon&quot;,
    &quot;stop&quot;: &quot;egg-scripts stop&quot;
  }
}</code></pre><p>这样我们就可以通过 <code>npm start</code> 和 <code>npm stop</code> 命令启动或停止应用。</p><blockquote><p>注意：<code>egg-scripts</code> 对 Windows 系统的支持有限，参见 <a href="https://github.com/eggjs/egg-scripts/pull/22">#22</a>。</p></blockquote><h3 id="启动命令">启动命令</h3><pre><code class="language-bash">$ egg-scripts start --port=7001 --daemon --title=egg-server-showcase</code></pre><p>如上示例，支持以下参数：</p><ul><li><code>--port=7001</code> 端口号，默认会读取环境变量 <code>process.env.PORT</code>，如未传递将使用框架内置端口 <code>7001</code>。</li><li><code>--daemon</code> 是否允许在后台模式，无需 <code>nohup</code>。若使用 Docker 建议直接前台运行。</li><li><code>--env=prod</code> 框架运行环境，默认会读取环境变量 <code>process.env.EGG_SERVER_ENV</code>， 如未传递将使用框架内置环境 <code>prod</code>。</li><li><code>--workers=2</code> 框架 worker 线程数，默认会创建和 CPU 核数相当的 app worker 数，可以充分的利用 CPU 资源。</li><li><code>--title=egg-server-showcase</code> 用于方便 ps 进程时 grep 用，默认为 <code>egg-server-${appname}</code>。</li><li><code>--framework=yadan</code> 如果应用使用了<a href="../advanced/framework.md">自定义框架</a>，可以配置 <code>package.json</code> 的 <code>egg.framework</code> 或指定该参数。</li><li><code>--ignore-stderr</code> 忽略启动期的报错。</li><li>所有 <a href="https://github.com/eggjs/egg-cluster">egg-cluster</a> 的 Options 都支持透传，如 <code>--https</code> 等。</li></ul><p>更多参数可查看 <a href="https://github.com/eggjs/egg-scripts">egg-scripts</a> 和 <a href="https://github.com/eggjs/egg-cluster">egg-cluster</a> 文档。</p><h4 id="启动配置项">启动配置项</h4><p>你也可以在 <code>config.{env}.js</code> 中配置指定启动配置。</p><pre><code class="language-js">// config/config.default.js

exports.cluster = {
  listen: {
    port: 7001,
    hostname: &#x27;127.0.0.1&#x27;,
    // path: &#x27;/var/run/egg.sock&#x27;,
  }
}</code></pre><p><code>path</code>，<code>port</code>，<code>hostname</code> 均为 <a href="https://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback">server.listen</a> 的参数，<code>egg-scripts</code> 和 <code>egg.startCluster</code> 方法传入的 port 优先级高于此配置。</p><h3 id="停止命令">停止命令</h3><pre><code class="language-bash">$ egg-scripts stop [--title=egg-server]</code></pre><p>该命令将杀死 master 进程，并通知 worker 和 agent 优雅退出。</p><p>支持以下参数：</p><ul><li><code>--title=egg-server</code> 用于杀死指定的 egg 应用，未传递则会终止所有的 Egg 应用。</li></ul><p>你也可以直接通过 <code>ps -eo &quot;pid,command&quot; | grep &quot;--type=egg-server&quot;</code> 来找到 master 进程，并 <code>kill</code> 掉，无需 <code>kill -9</code>。</p><h2 id="监控">监控</h2><p>我们还需要对服务进行性能监控，内存泄露分析，故障排除等。</p><p>业界常用的有：</p><ul><li><a href="https://www.aliyun.com/product/nodejs">Node.js 性能平台（alinode）</a></li><li><a href="https://nodesource.com/products/nsolid/">NSolid</a></li></ul><h3 id="nodejs-性能平台alinode">Node.js 性能平台（alinode）</h3><p><a href="https://www.aliyun.com/product/nodejs">Node.js 性能平台</a> 是面向所有 Node.js 应用提供 <code>性能监控、安全提醒、故障排查、性能优化</code> 等服务的整体性解决方案，提供完善的工具链和服务，协助开发者快速发现和定位线上问题。</p><h4 id="安装-runtime">安装 Runtime</h4><p>AliNode Runtime 可以直接替换掉 Node.js Runtime，对应版本参见<a href="https://help.aliyun.com/knowledge_detail/60811.html">文档</a>。</p><p>全局安装方式参见<a href="https://help.aliyun.com/document_detail/60338.html">文档</a>。</p><p>有时候，同机会部署多个项目，期望多版本共存时，则可以把 Runtime 安装到当前项目：</p><pre><code class="language-bash">$ npm i nodeinstall -g
$ nodeinstall --install-alinode ^3</code></pre><p><a href="https://github.com/cnpm/nodeinstall">nodeinstall</a> 会把对应版本的 <code>alinode</code> 安装到项目的 <code>node_modules</code> 目录下。</p><blockquote><p>注意：打包机的操作系统和线上系统需保持一致，否则对应的 Runtime 不一定能正常运行。</p></blockquote><h4 id="安装及配置">安装及配置</h4><p>我们提供了 <a href="https://github.com/eggjs/egg-alinode">egg-alinode</a> 来快速接入，无需安装 <code>agenthub</code> 等额外的常驻服务。</p><p><strong>安装依赖：</strong></p><pre><code class="language-bash">$ npm i egg-alinode --save</code></pre><p><strong>开启插件：</strong></p><pre><code class="language-js">// config/plugin.js
exports.alinode = {
  enable: true,
  package: &#x27;egg-alinode&#x27;,
};</code></pre><p><strong>配置：</strong></p><pre><code class="language-js">// config/config.default.js
exports.alinode = {
  // 从 `Node.js 性能平台` 获取对应的接入参数
  appid: &#x27;&lt;YOUR_APPID&gt;&#x27;,
  secret: &#x27;&lt;YOUR_SECRET&gt;&#x27;,
};</code></pre><h3 id="启动应用">启动应用</h3><p><code>npm scripts</code> 配置的 <code>start</code> 指令无需改变，通过 <code>egg-scripts</code> 即可。</p><p>启动命令需使用 <code>npm start</code>，因为 <code>npm scripts</code> 执行时会把 <code>node_module/.bin</code> 目录加入 <code>PATH</code>，故会优先使用当前项目执行的 Node 版本。</p><p>启动后会看到 master 日志包含以下内容：</p><pre><code class="language-bash">$ [master] node version v8.9.4
$ [master] alinode version v3.8.4</code></pre><h4 id="访问控制台">访问控制台</h4><p>控制台地址：<a href="https://node.console.aliyun.com">https://node.console.aliyun.com</a></p></div></div></div><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-0 ant-col-md-6"><div class="markdown-body" style="font-size:14px"><div><ul><li><a href="#%E6%9E%84%E5%BB%BA">构建</a></li><li><a href="#%E9%83%A8%E7%BD%B2">部署</a><ul><li><a href="#%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4">启动命令</a><ul><li><a href="#%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9">启动配置项</a></li></ul></li><li><a href="#%E5%81%9C%E6%AD%A2%E5%91%BD%E4%BB%A4">停止命令</a></li></ul></li><li><a href="#%E7%9B%91%E6%8E%A7">监控</a><ul><li><a href="#nodejs-%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0alinode">Node.js 性能平台（alinode）</a><ul><li><a href="#%E5%AE%89%E8%A3%85-runtime">安装 Runtime</a></li><li><a href="#%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE">安装及配置</a></li></ul></li><li><a href="#%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8">启动应用</a><ul><li><a href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%8F%B0">访问控制台</a></li></ul></li></ul></li></ul></div></div></div></div></div></div></div></div></div><script type="text/javascript">window.__INIT_STATE__={"lang":"zh","props":{"toc":"-%20%5B%E6%9E%84%E5%BB%BA%5D(%23%25E6%259E%2584%25E5%25BB%25BA)%0A-%20%5B%E9%83%A8%E7%BD%B2%5D(%23%25E9%2583%25A8%25E7%25BD%25B2)%0A%20%20*%20%5B%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4%5D(%23%25E5%2590%25AF%25E5%258A%25A8%25E5%2591%25BD%25E4%25BB%25A4)%0A%20%20%20%20%2B%20%5B%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9%5D(%23%25E5%2590%25AF%25E5%258A%25A8%25E9%2585%258D%25E7%25BD%25AE%25E9%25A1%25B9)%0A%20%20*%20%5B%E5%81%9C%E6%AD%A2%E5%91%BD%E4%BB%A4%5D(%23%25E5%2581%259C%25E6%25AD%25A2%25E5%2591%25BD%25E4%25BB%25A4)%0A-%20%5B%E7%9B%91%E6%8E%A7%5D(%23%25E7%259B%2591%25E6%258E%25A7)%0A%20%20*%20%5BNode.js%20%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0%EF%BC%88alinode%EF%BC%89%5D(%23nodejs-%25E6%2580%25A7%25E8%2583%25BD%25E5%25B9%25B3%25E5%258F%25B0alinode)%0A%20%20%20%20%2B%20%5B%E5%AE%89%E8%A3%85%20Runtime%5D(%23%25E5%25AE%2589%25E8%25A3%2585-runtime)%0A%20%20%20%20%2B%20%5B%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE%5D(%23%25E5%25AE%2589%25E8%25A3%2585%25E5%258F%258A%25E9%2585%258D%25E7%25BD%25AE)%0A%20%20*%20%5B%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%5D(%23%25E5%2590%25AF%25E5%258A%25A8%25E5%25BA%2594%25E7%2594%25A8)%0A%20%20%20%20%2B%20%5B%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%8F%B0%5D(%23%25E8%25AE%25BF%25E9%2597%25AE%25E6%258E%25A7%25E5%2588%25B6%25E5%258F%25B0)","meta":{"info":{"title":"应用部署"}},"content":"%0A%0A%0A%E5%9C%A8%5B%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%5D(.%2Fdevelopment.md)%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8%20%60egg-bin%20dev%60%20%E6%9D%A5%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BD%86%E6%98%AF%E5%9C%A8%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%BF%99%E6%A0%B7%E4%BD%BF%E7%94%A8%E3%80%82%E5%9B%A0%E4%B8%BA%20%60egg-bin%20dev%60%20%E4%BC%9A%E9%92%88%E5%AF%B9%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E5%81%9A%E5%BE%88%E5%A4%9A%E5%A4%84%E7%90%86%EF%BC%8C%E8%80%8C%E7%94%9F%E4%BA%A7%E8%BF%90%E8%A1%8C%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%8A%A0%E7%AE%80%E5%8D%95%E7%A8%B3%E5%AE%9A%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82%E6%89%80%E4%BB%A5%E6%9C%AC%E7%AB%A0%E4%B8%BB%E8%A6%81%E8%AE%B2%E8%A7%A3%E5%A6%82%E4%BD%95%E9%83%A8%E7%BD%B2%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%E3%80%82%0A%0A%E4%B8%80%E8%88%AC%E4%BB%8E%E6%BA%90%E7%A0%81%E4%BB%A3%E7%A0%81%E5%88%B0%E7%9C%9F%E6%AD%A3%E8%BF%90%E8%A1%8C%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BC%9A%E6%8B%86%E5%88%86%E6%88%90%E6%9E%84%E5%BB%BA%E5%92%8C%E9%83%A8%E7%BD%B2%E4%B8%A4%E6%AD%A5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0**%E4%B8%80%E6%AC%A1%E6%9E%84%E5%BB%BA%E5%A4%9A%E6%AC%A1%E9%83%A8%E7%BD%B2**%E3%80%82%0A%0A%23%23%20%E6%9E%84%E5%BB%BA%0A%0AJavaScript%20%E8%AF%AD%E8%A8%80%E6%9C%AC%E8%BA%AB%E4%B8%8D%E9%9C%80%E8%A6%81%E7%BC%96%E8%AF%91%E7%9A%84%EF%BC%8C%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E4%B8%BB%E8%A6%81%E6%98%AF%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E3%80%82%E4%BD%86%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%20TypeScript%20%E6%88%96%E8%80%85%20Babel%20%E6%94%AF%E6%8C%81%20ES6%20%E4%BB%A5%E4%B8%8A%E7%9A%84%E7%89%B9%E6%80%A7%EF%BC%8C%E9%82%A3%E5%B0%B1%E5%BF%85%E9%A1%BB%E8%A6%81%E8%BF%99%E4%B8%80%E6%AD%A5%E4%BA%86%E3%80%82%0A%0A%E4%B8%80%E8%88%AC%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E4%BC%9A%E6%8C%87%E5%AE%9A%20%60NODE_ENV%3Dproduction%60%20%E6%88%96%20%60npm%20install%20--production%60%20%E5%8F%AA%E5%AE%89%E8%A3%85%20dependencies%20%E7%9A%84%E4%BE%9D%E8%B5%96%E3%80%82%E5%9B%A0%E4%B8%BA%20devDependencies%20%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E8%BF%87%E5%A4%A7%E8%80%8C%E4%B8%94%E5%9C%A8%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8D%E4%BC%9A%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%AE%89%E8%A3%85%E5%90%8E%E4%B9%9F%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E6%9C%AA%E7%9F%A5%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%60%60%60bash%0A%24%20cd%20baseDir%0A%24%20npm%20install%20--production%0A%24%20tar%20-zcvf%20..%2Frelease.tgz%20.%0A%60%60%60%0A%0A%E6%9E%84%E5%BB%BA%E5%AE%8C%E6%88%90%E5%90%8E%E6%89%93%E5%8C%85%E6%88%90%20tgz%20%E6%96%87%E4%BB%B6%EF%BC%8C%E9%83%A8%E7%BD%B2%E7%9A%84%E6%97%B6%E5%80%99%E8%A7%A3%E5%8E%8B%E5%90%AF%E5%8A%A8%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%E3%80%82%0A%0A%E5%A2%9E%E5%8A%A0%E6%9E%84%E5%BB%BA%E7%8E%AF%E8%8A%82%E6%89%8D%E8%83%BD%E5%81%9A%E5%88%B0%E7%9C%9F%E6%AD%A3%E7%9A%84**%E4%B8%80%E6%AC%A1%E6%9E%84%E5%BB%BA%E5%A4%9A%E6%AC%A1%E9%83%A8%E7%BD%B2**%EF%BC%8C%E7%90%86%E8%AE%BA%E4%B8%8A%E4%BB%A3%E7%A0%81%E6%B2%A1%E6%9C%89%E6%94%B9%E5%8A%A8%E7%9A%84%E6%97%B6%E5%80%99%E6%98%AF%E4%B8%8D%E9%9C%80%E8%A6%81%E5%86%8D%E6%AC%A1%E6%9E%84%E5%BB%BA%E7%9A%84%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8E%9F%E6%9D%A5%E7%9A%84%E5%8C%85%E8%BF%9B%E8%A1%8C%E9%83%A8%E7%BD%B2%EF%BC%8C%E8%BF%99%E6%9C%89%E7%9D%80%E4%B8%8D%E5%B0%91%E5%A5%BD%E5%A4%84%EF%BC%9A%0A%0A-%20%E6%9E%84%E5%BB%BA%E4%BE%9D%E8%B5%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%92%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%98%AF%E6%9C%89%E5%B7%AE%E5%BC%82%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8D%E8%A6%81%E6%B1%A1%E6%9F%93%E8%BF%90%E8%A1%8C%E6%97%B6%E7%8E%AF%E5%A2%83%E3%80%82%0A-%20%E5%8F%AF%E4%BB%A5%E5%87%8F%E5%B0%91%E5%8F%91%E5%B8%83%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E8%80%8C%E4%B8%94%E6%98%93%E5%9B%9E%E6%BB%9A%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8A%8A%E5%8E%9F%E6%9D%A5%E7%9A%84%E5%8C%85%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%E5%8D%B3%E5%8F%AF%E3%80%82%0A%0A%23%23%20%E9%83%A8%E7%BD%B2%0A%0A%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%9C%80%E8%A6%81%E9%A2%84%E8%A3%85%20Node.js%EF%BC%8C%E6%A1%86%E6%9E%B6%E6%94%AF%E6%8C%81%E7%9A%84%20Node%20%E7%89%88%E6%9C%AC%E4%B8%BA%20%60%3E%3D%208.0.0%60%E3%80%82%0A%0A%E6%A1%86%E6%9E%B6%E5%86%85%E7%BD%AE%E4%BA%86%20%5Begg-cluster%5D%20%E6%9D%A5%E5%90%AF%E5%8A%A8%20%5BMaster%20%E8%BF%9B%E7%A8%8B%5D(.%2Fcluster-and-ipc.md%23master)%EF%BC%8CMaster%20%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7%EF%BC%8C%E4%B8%8D%E5%86%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%20%5Bpm2%5D%20%E7%AD%89%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4%E6%A8%A1%E5%9D%97%E3%80%82%0A%0A%E5%90%8C%E6%97%B6%EF%BC%8C%E6%A1%86%E6%9E%B6%E4%B9%9F%E6%8F%90%E4%BE%9B%E4%BA%86%20%5Begg-scripts%5D%20%E6%9D%A5%E6%94%AF%E6%8C%81%E7%BA%BF%E4%B8%8A%E7%8E%AF%E5%A2%83%E7%9A%84%E8%BF%90%E8%A1%8C%E5%92%8C%E5%81%9C%E6%AD%A2%E3%80%82%0A%0A%E9%A6%96%E5%85%88%EF%BC%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E6%8A%8A%20%60egg-scripts%60%20%E6%A8%A1%E5%9D%97%E4%BD%9C%E4%B8%BA%20%60dependencies%60%20%E5%BC%95%E5%85%A5%EF%BC%9A%0A%0A%60%60%60bash%0A%24%20npm%20i%20egg-scripts%20--save%0A%60%60%60%0A%0A%E6%B7%BB%E5%8A%A0%20%60npm%20scripts%60%20%E5%88%B0%20%60package.json%60%EF%BC%9A%0A%0A%60%60%60json%0A%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22start%22%3A%20%22egg-scripts%20start%20--daemon%22%2C%0A%20%20%20%20%22stop%22%3A%20%22egg-scripts%20stop%22%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%E8%BF%99%E6%A0%B7%E6%88%91%E4%BB%AC%E5%B0%B1%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%20%60npm%20start%60%20%E5%92%8C%20%60npm%20stop%60%20%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8%E6%88%96%E5%81%9C%E6%AD%A2%E5%BA%94%E7%94%A8%E3%80%82%0A%0A%3E%20%E6%B3%A8%E6%84%8F%EF%BC%9A%60egg-scripts%60%20%E5%AF%B9%20Windows%20%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%94%AF%E6%8C%81%E6%9C%89%E9%99%90%EF%BC%8C%E5%8F%82%E8%A7%81%20%5B%2322%5D(https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-scripts%2Fpull%2F22)%E3%80%82%0A%0A%23%23%23%20%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4%0A%0A%60%60%60bash%0A%24%20egg-scripts%20start%20--port%3D7001%20--daemon%20--title%3Degg-server-showcase%0A%60%60%60%0A%0A%E5%A6%82%E4%B8%8A%E7%A4%BA%E4%BE%8B%EF%BC%8C%E6%94%AF%E6%8C%81%E4%BB%A5%E4%B8%8B%E5%8F%82%E6%95%B0%EF%BC%9A%0A%0A-%20%60--port%3D7001%60%20%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%BC%9A%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20%60process.env.PORT%60%EF%BC%8C%E5%A6%82%E6%9C%AA%E4%BC%A0%E9%80%92%E5%B0%86%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6%E5%86%85%E7%BD%AE%E7%AB%AF%E5%8F%A3%20%607001%60%E3%80%82%0A-%20%60--daemon%60%20%E6%98%AF%E5%90%A6%E5%85%81%E8%AE%B8%E5%9C%A8%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%97%A0%E9%9C%80%20%60nohup%60%E3%80%82%E8%8B%A5%E4%BD%BF%E7%94%A8%20Docker%20%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E5%89%8D%E5%8F%B0%E8%BF%90%E8%A1%8C%E3%80%82%0A-%20%60--env%3Dprod%60%20%E6%A1%86%E6%9E%B6%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%BC%9A%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20%60process.env.EGG_SERVER_ENV%60%EF%BC%8C%20%E5%A6%82%E6%9C%AA%E4%BC%A0%E9%80%92%E5%B0%86%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6%E5%86%85%E7%BD%AE%E7%8E%AF%E5%A2%83%20%60prod%60%E3%80%82%0A-%20%60--workers%3D2%60%20%E6%A1%86%E6%9E%B6%20worker%20%E7%BA%BF%E7%A8%8B%E6%95%B0%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%BC%9A%E5%88%9B%E5%BB%BA%E5%92%8C%20CPU%20%E6%A0%B8%E6%95%B0%E7%9B%B8%E5%BD%93%E7%9A%84%20app%20worker%20%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%85%85%E5%88%86%E7%9A%84%E5%88%A9%E7%94%A8%20CPU%20%E8%B5%84%E6%BA%90%E3%80%82%0A-%20%60--title%3Degg-server-showcase%60%20%E7%94%A8%E4%BA%8E%E6%96%B9%E4%BE%BF%20ps%20%E8%BF%9B%E7%A8%8B%E6%97%B6%20grep%20%E7%94%A8%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA%20%60egg-server-%24%7Bappname%7D%60%E3%80%82%0A-%20%60--framework%3Dyadan%60%20%E5%A6%82%E6%9E%9C%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E4%BA%86%5B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A1%86%E6%9E%B6%5D(..%2Fadvanced%2Fframework.md)%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%20%60package.json%60%20%E7%9A%84%20%60egg.framework%60%20%E6%88%96%E6%8C%87%E5%AE%9A%E8%AF%A5%E5%8F%82%E6%95%B0%E3%80%82%0A-%20%60--ignore-stderr%60%20%E5%BF%BD%E7%95%A5%E5%90%AF%E5%8A%A8%E6%9C%9F%E7%9A%84%E6%8A%A5%E9%94%99%E3%80%82%0A-%20%E6%89%80%E6%9C%89%20%5Begg-cluster%5D%20%E7%9A%84%20Options%20%E9%83%BD%E6%94%AF%E6%8C%81%E9%80%8F%E4%BC%A0%EF%BC%8C%E5%A6%82%20%60--https%60%20%E7%AD%89%E3%80%82%0A%0A%E6%9B%B4%E5%A4%9A%E5%8F%82%E6%95%B0%E5%8F%AF%E6%9F%A5%E7%9C%8B%20%5Begg-scripts%5D%20%E5%92%8C%20%5Begg-cluster%5D%20%E6%96%87%E6%A1%A3%E3%80%82%0A%0A%23%23%23%23%20%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9%0A%0A%E4%BD%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%20%60config.%7Benv%7D.js%60%20%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E3%80%82%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0A%0Aexports.cluster%20%3D%20%7B%0A%20%20listen%3A%20%7B%0A%20%20%20%20port%3A%207001%2C%0A%20%20%20%20hostname%3A%20'127.0.0.1'%2C%0A%20%20%20%20%2F%2F%20path%3A%20'%2Fvar%2Frun%2Fegg.sock'%2C%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%60path%60%EF%BC%8C%60port%60%EF%BC%8C%60hostname%60%20%E5%9D%87%E4%B8%BA%20%5Bserver.listen%5D(https%3A%2F%2Fnodejs.org%2Fapi%2Fhttp.html%23http_server_listen_port_hostname_backlog_callback)%20%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%60egg-scripts%60%20%E5%92%8C%20%60egg.startCluster%60%20%E6%96%B9%E6%B3%95%E4%BC%A0%E5%85%A5%E7%9A%84%20port%20%E4%BC%98%E5%85%88%E7%BA%A7%E9%AB%98%E4%BA%8E%E6%AD%A4%E9%85%8D%E7%BD%AE%E3%80%82%0A%0A%0A%23%23%23%20%E5%81%9C%E6%AD%A2%E5%91%BD%E4%BB%A4%0A%0A%60%60%60bash%0A%24%20egg-scripts%20stop%20%5B--title%3Degg-server%5D%0A%60%60%60%0A%0A%E8%AF%A5%E5%91%BD%E4%BB%A4%E5%B0%86%E6%9D%80%E6%AD%BB%20master%20%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%B9%B6%E9%80%9A%E7%9F%A5%20worker%20%E5%92%8C%20agent%20%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA%E3%80%82%0A%0A%E6%94%AF%E6%8C%81%E4%BB%A5%E4%B8%8B%E5%8F%82%E6%95%B0%EF%BC%9A%0A-%20%60--title%3Degg-server%60%20%E7%94%A8%E4%BA%8E%E6%9D%80%E6%AD%BB%E6%8C%87%E5%AE%9A%E7%9A%84%20egg%20%E5%BA%94%E7%94%A8%EF%BC%8C%E6%9C%AA%E4%BC%A0%E9%80%92%E5%88%99%E4%BC%9A%E7%BB%88%E6%AD%A2%E6%89%80%E6%9C%89%E7%9A%84%20Egg%20%E5%BA%94%E7%94%A8%E3%80%82%0A%0A%E4%BD%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87%20%60ps%20-eo%20%22pid%2Ccommand%22%20%7C%20grep%20%22--type%3Degg-server%22%60%20%E6%9D%A5%E6%89%BE%E5%88%B0%20master%20%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%B9%B6%20%60kill%60%20%E6%8E%89%EF%BC%8C%E6%97%A0%E9%9C%80%20%60kill%20-9%60%E3%80%82%0A%0A%23%23%20%E7%9B%91%E6%8E%A7%0A%0A%E6%88%91%E4%BB%AC%E8%BF%98%E9%9C%80%E8%A6%81%E5%AF%B9%E6%9C%8D%E5%8A%A1%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%EF%BC%8C%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90%EF%BC%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4%E7%AD%89%E3%80%82%0A%0A%E4%B8%9A%E7%95%8C%E5%B8%B8%E7%94%A8%E7%9A%84%E6%9C%89%EF%BC%9A%0A-%20%5BNode.js%20%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0%EF%BC%88alinode%EF%BC%89%5D(https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fnodejs)%0A-%20%5BNSolid%5D(https%3A%2F%2Fnodesource.com%2Fproducts%2Fnsolid%2F)%0A%0A%23%23%23%20Node.js%20%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0%EF%BC%88alinode%EF%BC%89%0A%0A%5BNode.js%20%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0%5D(https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fnodejs)%20%E6%98%AF%E9%9D%A2%E5%90%91%E6%89%80%E6%9C%89%20Node.js%20%E5%BA%94%E7%94%A8%E6%8F%90%E4%BE%9B%20%60%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E3%80%81%E5%AE%89%E5%85%A8%E6%8F%90%E9%86%92%E3%80%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E3%80%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%60%20%E7%AD%89%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%95%B4%E4%BD%93%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%8C%E6%8F%90%E4%BE%9B%E5%AE%8C%E5%96%84%E7%9A%84%E5%B7%A5%E5%85%B7%E9%93%BE%E5%92%8C%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%8D%8F%E5%8A%A9%E5%BC%80%E5%8F%91%E8%80%85%E5%BF%AB%E9%80%9F%E5%8F%91%E7%8E%B0%E5%92%8C%E5%AE%9A%E4%BD%8D%E7%BA%BF%E4%B8%8A%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%23%23%23%23%20%E5%AE%89%E8%A3%85%20Runtime%0A%0AAliNode%20Runtime%20%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E6%9B%BF%E6%8D%A2%E6%8E%89%20Node.js%20Runtime%EF%BC%8C%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC%E5%8F%82%E8%A7%81%5B%E6%96%87%E6%A1%A3%5D(https%3A%2F%2Fhelp.aliyun.com%2Fknowledge_detail%2F60811.html)%E3%80%82%0A%0A%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F%E5%8F%82%E8%A7%81%5B%E6%96%87%E6%A1%A3%5D(https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F60338.html)%E3%80%82%0A%0A%E6%9C%89%E6%97%B6%E5%80%99%EF%BC%8C%E5%90%8C%E6%9C%BA%E4%BC%9A%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%9C%9F%E6%9C%9B%E5%A4%9A%E7%89%88%E6%9C%AC%E5%85%B1%E5%AD%98%E6%97%B6%EF%BC%8C%E5%88%99%E5%8F%AF%E4%BB%A5%E6%8A%8A%20Runtime%20%E5%AE%89%E8%A3%85%E5%88%B0%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE%EF%BC%9A%0A%0A%60%60%60bash%0A%24%20npm%20i%20nodeinstall%20-g%0A%24%20nodeinstall%20--install-alinode%20%5E3%0A%60%60%60%0A%0A%5Bnodeinstall%5D%20%E4%BC%9A%E6%8A%8A%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC%E7%9A%84%20%60alinode%60%20%E5%AE%89%E8%A3%85%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%20%60node_modules%60%20%E7%9B%AE%E5%BD%95%E4%B8%8B%E3%80%82%0A%0A%3E%20%E6%B3%A8%E6%84%8F%EF%BC%9A%E6%89%93%E5%8C%85%E6%9C%BA%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%BA%BF%E4%B8%8A%E7%B3%BB%E7%BB%9F%E9%9C%80%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%EF%BC%8C%E5%90%A6%E5%88%99%E5%AF%B9%E5%BA%94%E7%9A%84%20Runtime%20%E4%B8%8D%E4%B8%80%E5%AE%9A%E8%83%BD%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C%E3%80%82%0A%0A%23%23%23%23%20%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE%0A%0A%E6%88%91%E4%BB%AC%E6%8F%90%E4%BE%9B%E4%BA%86%20%5Begg-alinode%5D%20%E6%9D%A5%E5%BF%AB%E9%80%9F%E6%8E%A5%E5%85%A5%EF%BC%8C%E6%97%A0%E9%9C%80%E5%AE%89%E8%A3%85%20%60agenthub%60%20%E7%AD%89%E9%A2%9D%E5%A4%96%E7%9A%84%E5%B8%B8%E9%A9%BB%E6%9C%8D%E5%8A%A1%E3%80%82%0A%0A**%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%EF%BC%9A**%0A%0A%60%60%60bash%0A%24%20npm%20i%20egg-alinode%20--save%0A%60%60%60%0A%0A**%E5%BC%80%E5%90%AF%E6%8F%92%E4%BB%B6%EF%BC%9A**%0A%0A%60%60%60js%0A%2F%2F%20config%2Fplugin.js%0Aexports.alinode%20%3D%20%7B%0A%20%20enable%3A%20true%2C%0A%20%20package%3A%20'egg-alinode'%2C%0A%7D%3B%0A%60%60%60%0A%0A**%E9%85%8D%E7%BD%AE%EF%BC%9A**%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0Aexports.alinode%20%3D%20%7B%0A%20%20%2F%2F%20%E4%BB%8E%20%60Node.js%20%E6%80%A7%E8%83%BD%E5%B9%B3%E5%8F%B0%60%20%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%9A%84%E6%8E%A5%E5%85%A5%E5%8F%82%E6%95%B0%0A%20%20appid%3A%20'%3CYOUR_APPID%3E'%2C%0A%20%20secret%3A%20'%3CYOUR_SECRET%3E'%2C%0A%7D%3B%0A%60%60%60%0A%0A%23%23%23%20%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%0A%0A%60npm%20scripts%60%20%E9%85%8D%E7%BD%AE%E7%9A%84%20%60start%60%20%E6%8C%87%E4%BB%A4%E6%97%A0%E9%9C%80%E6%94%B9%E5%8F%98%EF%BC%8C%E9%80%9A%E8%BF%87%20%60egg-scripts%60%20%E5%8D%B3%E5%8F%AF%E3%80%82%0A%0A%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4%E9%9C%80%E4%BD%BF%E7%94%A8%20%60npm%20start%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%20%60npm%20scripts%60%20%E6%89%A7%E8%A1%8C%E6%97%B6%E4%BC%9A%E6%8A%8A%20%60node_module%2F.bin%60%20%E7%9B%AE%E5%BD%95%E5%8A%A0%E5%85%A5%20%60PATH%60%EF%BC%8C%E6%95%85%E4%BC%9A%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE%E6%89%A7%E8%A1%8C%E7%9A%84%20Node%20%E7%89%88%E6%9C%AC%E3%80%82%0A%0A%E5%90%AF%E5%8A%A8%E5%90%8E%E4%BC%9A%E7%9C%8B%E5%88%B0%20master%20%E6%97%A5%E5%BF%97%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A%0A%0A%60%60%60bash%0A%24%20%5Bmaster%5D%20node%20version%20v8.9.4%0A%24%20%5Bmaster%5D%20alinode%20version%20v3.8.4%0A%60%60%60%0A%0A%23%23%23%23%20%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%8F%B0%0A%0A%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%9C%B0%E5%9D%80%EF%BC%9A%5Bhttps%3A%2F%2Fnode.console.aliyun.com%5D(https%3A%2F%2Fnode.console.aliyun.com)%0A%0A%0A%5Begg-cluster%5D%3A%20https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-cluster%0A%5Begg-scripts%5D%3A%20https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-scripts%0A%5Begg-alinode%5D%3A%20https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-alinode%0A%5Bpm2%5D%3A%20https%3A%2F%2Fgithub.com%2FUnitech%2Fpm2%0A%5Bnodeinstall%5D%3A%20https%3A%2F%2Fgithub.com%2Fcnpm%2Fnodeinstall"}}</script><script type="text/javascript" src="/static/js/post.b9faab88.js"></script></body></html>