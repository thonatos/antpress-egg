<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.png"><style class="_styletron_hydrate_"></style><title>I18n 国际化</title><meta name="description" content="Born to build better enterprise frameworks and apps"><link href="/static/css/post.d62265dc.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="ant-layout" data-reactroot=""><div class="header-module__header___3ADJ9 ant-layout-header"><div class="ant-row-flex"><div class="ant-col-xs-12 ant-col-md-20 ant-col-lg-2"><div class="header-module__logo___3yTXp"><a href="/"><img src="/logo.svg" alt="logo"/></a></div></div><div class="ant-col-xs-0 ant-col-md-0 ant-col-lg-20"><ul class="ant-menu header-module__menu___3yEtW ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/intro/">指南</a></li><li class="ant-menu-item" role="menuitem"><a href="/api/">API</a></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/tutorials/index.html">教程</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/search?q=topic%3Aegg-plugin&amp;type=Repositories">插件</a></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/eggjs/egg/releases">发布日志</a></li></ul></div><div style="text-align:right" class="ant-col-xs-12 ant-col-md-4 ant-col-lg-2"><button type="button" class="ant-btn"><span>Languages</span></button></div></div></div><div class="ant-layout-content"><div class="basic_layout-module__content___3flpY ant-layout"><div class="sider-module__side___1Cadj ant-layout-sider ant-layout-sider-light" style="flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"><ul class="ant-menu sider-module__menu___2GqPr ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true"><span>新手指南</span><i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/index.html">Egg.js 是什么?</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/egg-and-koa.html">Egg.js 和 Koa</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/intro/quickstart.html">快速入门</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/progressive.html">渐进式开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/migration.html">2.x 升级指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true"><span>基础功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/structure.html">目录结构</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/objects.html">内置对象</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/env.html">运行环境</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/config.html">配置</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/middleware.html">中间件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/router.html">Router</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/controller.html">Controller</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/service.html">Service</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/plugin.html">插件</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/schedule.html">定时任务</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/extend.html">框架扩展</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/basics/app-start.html">启动自定义</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true"><span>核心功能</span><i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/development.html">本地开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/unittest.html">单元测试</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/deployment.html">应用部署</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/logger.html">日志</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/httpclient.html">HttpClient</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cookie-and-session.html">Cookie and Session</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/cluster-and-ipc.html">多进程模型和进程间通讯</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/view.html">模板渲染</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/error-handling.html">异常处理</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/security.html">安全</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/core/i18n.html">国际化</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="3$Menu" aria-haspopup="true"><span>教程</span><i class="ant-menu-submenu-arrow"></i></div><ul id="3$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/mysql.html">MySQL</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/restful.html">RESTful API</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/passport.html">Passport 鉴权</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/socketio.html">Socket.IO</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/assets.html">静态资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/tutorials/typescript.html">TypeScript</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true"><span>进阶</span><i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/loader.html">Loader</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/plugin.html">插件开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/framework.html">框架开发</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/cluster-client.html">多进程研发模式增强</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/advanced/view-plugin.html">模板插件开发规范</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/style-guide.html">代码风格指南</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true"><span>社区</span><i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu  ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/plugins/">内置插件列表</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/contributing.html">如何贡献</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/resource.html">资源</a></li><li class="ant-menu-item" role="menuitem" style="padding-left:48px"><a href="/zh-cn/faq.html">常见问题</a></li></ul></li></ul></div></div><div class="basic_layout-module__post___2Z7KK ant-layout-content"><div class="ant-row" style="margin-left:-8px;margin-right:-8px"><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-24 ant-col-md-18"><div class="markdown-body" style="font-size:14px"><div><p>为了方便开发多语言应用，框架内置了国际化（I18n）支持，由 <a href="https://github.com/eggjs/egg-i18n">egg-i18n</a> 插件提供。</p><h2 id="默认语言">默认语言</h2><p>默认语言是 <code>en-US</code>。假设我们想修改默认语言为简体中文：</p><pre><code class="language-js">// config/config.default.js
exports.i18n = {
  defaultLocale: &#x27;zh-CN&#x27;,
};</code></pre><h2 id="切换语言">切换语言</h2><p>我们可以通过下面几种方式修改应用的当前语言（修改后会记录到 <code>locale</code> 这个 Cookie），下次请求直接用设定好的语言。</p><p>优先级从高到低：</p><ol><li>query: <code>/?locale=en-US</code></li><li>cookie: <code>locale=zh-TW</code></li><li>header: <code>Accept-Language: zh-CN,zh;q=0.5</code></li></ol><p>如果想修改 query 或者 Cookie 参数名称：</p><pre><code class="language-js">// config/config.default.js
exports.i18n = {
  queryField: &#x27;locale&#x27;,
  cookieField: &#x27;locale&#x27;,
  // Cookie 默认一年后过期， 如果设置为 Number，则单位为 ms
  cookieMaxAge: &#x27;1y&#x27;,
};</code></pre><h2 id="编写-i18n-多语言文件">编写 I18n 多语言文件</h2><p>多种语言的配置是独立的，统一存放在 <code>config/locale/*.js</code> 下。</p><pre><code>- config/locale/
  - en-US.js
  - zh-CN.js
  - zh-TW.js</code></pre><p>不仅对于应用目录生效，在框架，插件的 <code>config/locale</code> 目录下同样生效。</p><p><strong>注意单词拼写，是 locale 不是 locals。</strong></p><p>例如：</p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  Email: &#x27;邮箱&#x27;,
};</code></pre><p>或者也可以用 JSON 格式的文件：</p><pre><code class="language-json">// config/locale/zh-CN.json
{
  &quot;Email&quot;: &quot;邮箱&quot;
}</code></pre><h2 id="获取多语言文本">获取多语言文本</h2><p>我们可以使用 <code>__</code> (Alias: <code>gettext</code>) 函数获取 locale 文件夹下面的多语言文本。</p><p><strong>注意: <code>__</code> 是两个下划线</strong></p><p>以上面配置过的多语言为例：</p><pre><code class="language-js">ctx.__(&#x27;Email&#x27;)
// zh-CN =&gt; 邮箱
// en-US =&gt; Email</code></pre><p>如果文本中含有 <code>%s</code>，<code>%j</code> 等 format 函数，可以按照 <a href="https://nodejs.org/api/util.html#util_util_format_format_args"><code>util.format()</code></a> 类似的方式调用：</p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  &#x27;Welcome back, %s!&#x27;: &#x27;欢迎回来，%s!&#x27;,
};

ctx.__(&#x27;Welcome back, %s!&#x27;, &#x27;Shawn&#x27;);
// zh-CN =&gt; 欢迎回来，Shawn!
// en-US =&gt; Welcome back, Shawn!</code></pre><p>同时支持数组下标占位符方式，例如：</p><pre><code class="language-js">// config/locale/zh-CN.js
module.exports = {
  &#x27;Hello {0}! My name is {1}.&#x27;: &#x27;你好 {0}! 我的名字叫 {1}。&#x27;,
};

ctx.__(&#x27;Hello {0}! My name is {1}.&#x27;, [&#x27;foo&#x27;, &#x27;bar&#x27;])
// zh-CN =&gt; 你好 foo！我的名字叫 bar。
// en-US =&gt; Hello foo! My name is bar.</code></pre><h3 id="controller-中使用">Controller 中使用</h3><pre><code class="language-js">class HomeController extends Controller {
  async index() {
    const ctx = this.ctx;
    ctx.body = {
      message: ctx.__(&#x27;Welcome back, %s!&#x27;, ctx.user.name)
      // 或者使用 gettext，gettext 是 __ 函数的 alias
      // message: ctx.gettext(&#x27;Welcome back&#x27;, ctx.user.name)
      user: ctx.user,
    };
  }
}</code></pre><h3 id="view-中使用">View 中使用</h3><p>假设我们使用的模板引擎是 <a href="https://github.com/eggjs/egg-view-nunjucks">Nunjucks</a></p><pre><code class="language-html">&lt;li&gt;{{ __(&#x27;Email&#x27;) }}: {{ user.email }}&lt;/li&gt;
&lt;li&gt;
  {{ __(&#x27;Welcome back, %s!&#x27;, user.name) }}
&lt;/li&gt;
&lt;li&gt;
  {{ __(&#x27;Hello {0}! My name is {1}.&#x27;, [&#x27;foo&#x27;, &#x27;bar&#x27;]) }}
&lt;/li&gt;</code></pre></div></div></div><div style="padding-left:8px;padding-right:8px" class="ant-col-xs-0 ant-col-md-6"><div class="markdown-body" style="font-size:14px"><div><ul><li><a href="#%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80">默认语言</a></li><li><a href="#%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80">切换语言</a></li><li><a href="#%E7%BC%96%E5%86%99-i18n-%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6">编写 I18n 多语言文件</a></li><li><a href="#%E8%8E%B7%E5%8F%96%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E6%9C%AC">获取多语言文本</a><ul><li><a href="#controller-%E4%B8%AD%E4%BD%BF%E7%94%A8">Controller 中使用</a></li><li><a href="#view-%E4%B8%AD%E4%BD%BF%E7%94%A8">View 中使用</a></li></ul></li></ul></div></div></div></div></div></div></div></div></div><script type="text/javascript">window.__INIT_STATE__={"lang":"zh","props":{"toc":"-%20%5B%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80%5D(%23%25E9%25BB%2598%25E8%25AE%25A4%25E8%25AF%25AD%25E8%25A8%2580)%0A-%20%5B%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80%5D(%23%25E5%2588%2587%25E6%258D%25A2%25E8%25AF%25AD%25E8%25A8%2580)%0A-%20%5B%E7%BC%96%E5%86%99%20I18n%20%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%5D(%23%25E7%25BC%2596%25E5%2586%2599-i18n-%25E5%25A4%259A%25E8%25AF%25AD%25E8%25A8%2580%25E6%2596%2587%25E4%25BB%25B6)%0A-%20%5B%E8%8E%B7%E5%8F%96%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E6%9C%AC%5D(%23%25E8%258E%25B7%25E5%258F%2596%25E5%25A4%259A%25E8%25AF%25AD%25E8%25A8%2580%25E6%2596%2587%25E6%259C%25AC)%0A%20%20*%20%5BController%20%E4%B8%AD%E4%BD%BF%E7%94%A8%5D(%23controller-%25E4%25B8%25AD%25E4%25BD%25BF%25E7%2594%25A8)%0A%20%20*%20%5BView%20%E4%B8%AD%E4%BD%BF%E7%94%A8%5D(%23view-%25E4%25B8%25AD%25E4%25BD%25BF%25E7%2594%25A8)","meta":{"info":{"title":"I18n 国际化"}},"content":"%0A%0A%0A%E4%B8%BA%E4%BA%86%E6%96%B9%E4%BE%BF%E5%BC%80%E5%8F%91%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%BA%94%E7%94%A8%EF%BC%8C%E6%A1%86%E6%9E%B6%E5%86%85%E7%BD%AE%E4%BA%86%E5%9B%BD%E9%99%85%E5%8C%96%EF%BC%88I18n%EF%BC%89%E6%94%AF%E6%8C%81%EF%BC%8C%E7%94%B1%20%5Begg-i18n%5D(https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-i18n)%20%E6%8F%92%E4%BB%B6%E6%8F%90%E4%BE%9B%E3%80%82%0A%0A%23%23%20%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80%0A%0A%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80%E6%98%AF%20%60en-US%60%E3%80%82%E5%81%87%E8%AE%BE%E6%88%91%E4%BB%AC%E6%83%B3%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80%E4%B8%BA%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0Aexports.i18n%20%3D%20%7B%0A%20%20defaultLocale%3A%20'zh-CN'%2C%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80%0A%0A%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%8B%E9%9D%A2%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%BF%AE%E6%94%B9%E5%BA%94%E7%94%A8%E7%9A%84%E5%BD%93%E5%89%8D%E8%AF%AD%E8%A8%80%EF%BC%88%E4%BF%AE%E6%94%B9%E5%90%8E%E4%BC%9A%E8%AE%B0%E5%BD%95%E5%88%B0%20%60locale%60%20%E8%BF%99%E4%B8%AA%20Cookie%EF%BC%89%EF%BC%8C%E4%B8%8B%E6%AC%A1%E8%AF%B7%E6%B1%82%E7%9B%B4%E6%8E%A5%E7%94%A8%E8%AE%BE%E5%AE%9A%E5%A5%BD%E7%9A%84%E8%AF%AD%E8%A8%80%E3%80%82%0A%0A%E4%BC%98%E5%85%88%E7%BA%A7%E4%BB%8E%E9%AB%98%E5%88%B0%E4%BD%8E%EF%BC%9A%0A%0A1.%20query%3A%20%60%2F%3Flocale%3Den-US%60%0A2.%20cookie%3A%20%60locale%3Dzh-TW%60%0A3.%20header%3A%20%60Accept-Language%3A%20zh-CN%2Czh%3Bq%3D0.5%60%0A%0A%E5%A6%82%E6%9E%9C%E6%83%B3%E4%BF%AE%E6%94%B9%20query%20%E6%88%96%E8%80%85%20Cookie%20%E5%8F%82%E6%95%B0%E5%90%8D%E7%A7%B0%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Fconfig.default.js%0Aexports.i18n%20%3D%20%7B%0A%20%20queryField%3A%20'locale'%2C%0A%20%20cookieField%3A%20'locale'%2C%0A%20%20%2F%2F%20Cookie%20%E9%BB%98%E8%AE%A4%E4%B8%80%E5%B9%B4%E5%90%8E%E8%BF%87%E6%9C%9F%EF%BC%8C%20%E5%A6%82%E6%9E%9C%E8%AE%BE%E7%BD%AE%E4%B8%BA%20Number%EF%BC%8C%E5%88%99%E5%8D%95%E4%BD%8D%E4%B8%BA%20ms%0A%20%20cookieMaxAge%3A%20'1y'%2C%0A%7D%3B%0A%60%60%60%0A%0A%23%23%20%E7%BC%96%E5%86%99%20I18n%20%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%0A%0A%E5%A4%9A%E7%A7%8D%E8%AF%AD%E8%A8%80%E7%9A%84%E9%85%8D%E7%BD%AE%E6%98%AF%E7%8B%AC%E7%AB%8B%E7%9A%84%EF%BC%8C%E7%BB%9F%E4%B8%80%E5%AD%98%E6%94%BE%E5%9C%A8%20%60config%2Flocale%2F*.js%60%20%E4%B8%8B%E3%80%82%0A%0A%60%60%60%0A-%20config%2Flocale%2F%0A%20%20-%20en-US.js%0A%20%20-%20zh-CN.js%0A%20%20-%20zh-TW.js%0A%60%60%60%0A%0A%E4%B8%8D%E4%BB%85%E5%AF%B9%E4%BA%8E%E5%BA%94%E7%94%A8%E7%9B%AE%E5%BD%95%E7%94%9F%E6%95%88%EF%BC%8C%E5%9C%A8%E6%A1%86%E6%9E%B6%EF%BC%8C%E6%8F%92%E4%BB%B6%E7%9A%84%20%60config%2Flocale%60%20%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%90%8C%E6%A0%B7%E7%94%9F%E6%95%88%E3%80%82%0A%0A**%E6%B3%A8%E6%84%8F%E5%8D%95%E8%AF%8D%E6%8B%BC%E5%86%99%EF%BC%8C%E6%98%AF%20locale%20%E4%B8%8D%E6%98%AF%20locals%E3%80%82**%0A%0A%E4%BE%8B%E5%A6%82%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20Email%3A%20'%E9%82%AE%E7%AE%B1'%2C%0A%7D%3B%0A%60%60%60%0A%0A%E6%88%96%E8%80%85%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%20JSON%20%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%9A%0A%0A%60%60%60json%0A%2F%2F%20config%2Flocale%2Fzh-CN.json%0A%7B%0A%20%20%22Email%22%3A%20%22%E9%82%AE%E7%AE%B1%22%0A%7D%0A%60%60%60%0A%0A%23%23%20%E8%8E%B7%E5%8F%96%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E6%9C%AC%0A%0A%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20%60__%60%20(Alias%3A%20%60gettext%60)%20%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96%20locale%20%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%96%87%E6%9C%AC%E3%80%82%0A%0A**%E6%B3%A8%E6%84%8F%3A%20%60__%60%20%E6%98%AF%E4%B8%A4%E4%B8%AA%E4%B8%8B%E5%88%92%E7%BA%BF**%0A%0A%E4%BB%A5%E4%B8%8A%E9%9D%A2%E9%85%8D%E7%BD%AE%E8%BF%87%E7%9A%84%E5%A4%9A%E8%AF%AD%E8%A8%80%E4%B8%BA%E4%BE%8B%EF%BC%9A%0A%0A%60%60%60js%0Actx.__('Email')%0A%2F%2F%20zh-CN%20%3D%3E%20%E9%82%AE%E7%AE%B1%0A%2F%2F%20en-US%20%3D%3E%20Email%0A%60%60%60%0A%0A%E5%A6%82%E6%9E%9C%E6%96%87%E6%9C%AC%E4%B8%AD%E5%90%AB%E6%9C%89%20%60%25s%60%EF%BC%8C%60%25j%60%20%E7%AD%89%20format%20%E5%87%BD%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%89%E7%85%A7%20%5B%60util.format()%60%5D(https%3A%2F%2Fnodejs.org%2Fapi%2Futil.html%23util_util_format_format_args)%20%E7%B1%BB%E4%BC%BC%E7%9A%84%E6%96%B9%E5%BC%8F%E8%B0%83%E7%94%A8%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20'Welcome%20back%2C%20%25s!'%3A%20'%E6%AC%A2%E8%BF%8E%E5%9B%9E%E6%9D%A5%EF%BC%8C%25s!'%2C%0A%7D%3B%0A%0Actx.__('Welcome%20back%2C%20%25s!'%2C%20'Shawn')%3B%0A%2F%2F%20zh-CN%20%3D%3E%20%E6%AC%A2%E8%BF%8E%E5%9B%9E%E6%9D%A5%EF%BC%8CShawn!%0A%2F%2F%20en-US%20%3D%3E%20Welcome%20back%2C%20Shawn!%0A%60%60%60%0A%0A%E5%90%8C%E6%97%B6%E6%94%AF%E6%8C%81%E6%95%B0%E7%BB%84%E4%B8%8B%E6%A0%87%E5%8D%A0%E4%BD%8D%E7%AC%A6%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20config%2Flocale%2Fzh-CN.js%0Amodule.exports%20%3D%20%7B%0A%20%20'Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%3A%20'%E4%BD%A0%E5%A5%BD%20%7B0%7D!%20%E6%88%91%E7%9A%84%E5%90%8D%E5%AD%97%E5%8F%AB%20%7B1%7D%E3%80%82'%2C%0A%7D%3B%0A%0Actx.__('Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%2C%20%5B'foo'%2C%20'bar'%5D)%0A%2F%2F%20zh-CN%20%3D%3E%20%E4%BD%A0%E5%A5%BD%20foo%EF%BC%81%E6%88%91%E7%9A%84%E5%90%8D%E5%AD%97%E5%8F%AB%20bar%E3%80%82%0A%2F%2F%20en-US%20%3D%3E%20Hello%20foo!%20My%20name%20is%20bar.%0A%60%60%60%0A%0A%23%23%23%20Controller%20%E4%B8%AD%E4%BD%BF%E7%94%A8%0A%0A%60%60%60js%0Aclass%20HomeController%20extends%20Controller%20%7B%0A%20%20async%20index()%20%7B%0A%20%20%20%20const%20ctx%20%3D%20this.ctx%3B%0A%20%20%20%20ctx.body%20%3D%20%7B%0A%20%20%20%20%20%20message%3A%20ctx.__('Welcome%20back%2C%20%25s!'%2C%20ctx.user.name)%0A%20%20%20%20%20%20%2F%2F%20%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%20gettext%EF%BC%8Cgettext%20%E6%98%AF%20__%20%E5%87%BD%E6%95%B0%E7%9A%84%20alias%0A%20%20%20%20%20%20%2F%2F%20message%3A%20ctx.gettext('Welcome%20back'%2C%20ctx.user.name)%0A%20%20%20%20%20%20user%3A%20ctx.user%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20View%20%E4%B8%AD%E4%BD%BF%E7%94%A8%0A%0A%E5%81%87%E8%AE%BE%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E6%98%AF%20%5BNunjucks%5D(https%3A%2F%2Fgithub.com%2Feggjs%2Fegg-view-nunjucks)%0A%0A%60%60%60html%0A%3Cli%3E%7B%7B%20__('Email')%20%7D%7D%3A%20%7B%7B%20user.email%20%7D%7D%3C%2Fli%3E%0A%3Cli%3E%0A%20%20%7B%7B%20__('Welcome%20back%2C%20%25s!'%2C%20user.name)%20%7D%7D%0A%3C%2Fli%3E%0A%3Cli%3E%0A%20%20%7B%7B%20__('Hello%20%7B0%7D!%20My%20name%20is%20%7B1%7D.'%2C%20%5B'foo'%2C%20'bar'%5D)%20%7D%7D%0A%3C%2Fli%3E%0A%60%60%60%0A"}}</script><script type="text/javascript" src="/static/js/post.b9faab88.js"></script></body></html>